<!DOCTYPE html>
<html
  itemscope
  itemtype="http://schema.org/WebPage"
  lang="en"
  class="color-toggle-hidden"
  
>
  <head>
    <meta charset="UTF-8" />
<meta name="referrer" content="no-referrer" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<meta name="generator" content="Hugo 0.101.0" />
  <meta name="description" content="Pynetbox is a Python API client library for Netbox. In other words, it’s a library that does all the heavy lifting for us when dealing with the Netbox API. It saves us from crafting our API calls using the Python Requests library or the like1.
Where I see it especially useful is when it comes to how easy it makes it to search, update or delete existing data. Once you understand its structure (hopefully by the end of reading this post you will), you find it intuitive and easy to get useful work done quickly." />
    <meta name="author" content="Ismael" />

    <title>Netbox automation using Pynetbox | Ismael Serghini&#39;s Blog</title>

    <link rel="icon" type="image/svg+xml" href="/favicon/favicon.svg" />
<link
  rel="icon"
  type="image/png"
  sizes="32x32"
  href="/favicon/favicon-32x32.png"
/>
<link
  rel="icon"
  type="image/png"
  sizes="16x16"
  href="/favicon/favicon-16x16.png"
/>

    

    
  <meta
    property="og:title"
    content="Netbox automation using Pynetbox"
  />
  <meta property="og:site_name" content="Ismael Serghini's Blog" />
  <meta property="og:description" content="Pynetbox is a Python API client library for Netbox. In other words, it’s a library that does all the heavy lifting for us when dealing with the Netbox API. It saves us from crafting our API calls using the Python Requests library or the like1.
Where I see it especially useful is when it comes to how easy it makes it to search, update or delete existing data. Once you understand its structure (hopefully by the end of reading this post you will), you find it intuitive and easy to get useful work done quickly." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://iserghini.github.io/posts/netbox-automation-using-pynetbox/" />

<meta property="article:section" content="Posts" />
    <meta
      property="article:published_time"
      content="2022-08-03T00:00:00+00:00"
    />
    <meta
      property="article:modified_time"
      content="2022-08-03T00:00:00+00:00"
    />


  <meta name="twitter:card" content="summary" />
<meta name="twitter:title" content="Netbox automation using Pynetbox" />
  <meta name="twitter:description" content="Pynetbox is a Python API client library for Netbox. In other words, it’s a library that does all the heavy lifting for us when dealing with the Netbox API. It saves us from crafting our API calls using the Python Requests library or the like1.
Where I see it especially useful is when it comes to how easy it makes it to search, update or delete existing data. Once you understand its structure (hopefully by the end of reading this post you will), you find it intuitive and easy to get useful work done quickly." />

<script type="application/ld+json">
  {
      "@context": "http://schema.org",
      "@type": "BlogPosting",
      "articleSection": "Posts",
      "name": "Netbox automation using Pynetbox",
      "url" : "https://iserghini.github.io/posts/netbox-automation-using-pynetbox/",
      "headline": "Netbox automation using Pynetbox",
      "description": "Pynetbox is a Python API client library for Netbox. In other words, it’s a library that does all the heavy lifting for us when dealing with the Netbox API. It saves us from crafting our API calls using the Python Requests library or the like1.\nWhere I see it especially useful is when it comes to how easy it makes it to search, update or delete existing data. Once you understand its structure (hopefully by the end of reading this post you will), you find it intuitive and easy to get useful work done quickly.",
      "wordCount" : "2233",
      "inLanguage": "en",
      "isFamilyFriendly": "true",
      "mainEntityOfPage": {
          "@type": "WebPage",
          "@id": "https://iserghini.github.io/posts/netbox-automation-using-pynetbox/"
      },
      "author" : [
          {
              "@type": "Person",
              "name": "Ismael"
          }
      ],
      "copyrightHolder" : "Ismael Serghini\u0027s Blog",
      "copyrightYear" : "2022",
      "dateCreated": "2022-08-03T00:00:00.00Z",
      "datePublished": "2022-08-03T00:00:00.00Z",
      "dateModified": "2022-08-03T00:00:00.00Z",
      "publisher":{
          "@type":"Organization",
          "name": "Ismael Serghini's Blog",
          "url": "https://iserghini.github.io/",
          "logo": {
              "@type": "ImageObject",
              "url": "https://iserghini.github.io/logo-1.svg",
              "width":"32",
              "height":"32"
          }
      }
  }
  </script>


    <script src="/js/main-76d70e50.bundle.min.js"></script>

<link
  rel="preload"
  as="font"
  href="/fonts/Metropolis.woff2"
  type="font/woff2"
  crossorigin="anonymous"
/>
<link
  rel="preload"
  as="font"
  href="/fonts/LiberationSans.woff2"
  type="font/woff2"
  crossorigin="anonymous"
/>
<link
  rel="preload"
  as="font"
  href="/fonts/GeekblogIcons.woff2"
  type="font/woff2"
  crossorigin="anonymous"
/>

<link
  rel="preload"
  href="/main-8bc36ead.min.css"
  as="style"
/>
<link
  rel="stylesheet"
  href="/main-8bc36ead.min.css"
  media="all"
/>

<link
  rel="preload"
  href="/mobile-08d9c9f0.min.css"
  as="style"
/>
<link
  rel="stylesheet"
  href="/mobile-08d9c9f0.min.css"
  media="screen and (max-width: 45rem)"
/>

<link
  rel="preload"
  href="/print-8a905a2e.min.css"
  as="style"
/>
<link
  rel="stylesheet"
  href="/print-8a905a2e.min.css"
  media="print"
/>

<link
  rel="preload"
  href="/custom.css"
  as="style"
/>
<link
  rel="stylesheet"
  href="/custom.css"
  media="all"
/>
  <link href="https://iserghini.github.io/posts/netbox-automation-using-pynetbox/" rel="canonical" type="text/html" />
    <link href="https://iserghini.github.io/feed.xml" rel="alternate" type="application/atom+xml" title="Ismael Serghini's Blog Atom Feed" />

<!-- Made with Geekblog theme https://github.com/thegeeklab/hugo-geekblog -->

    

  </head>

  <body>
    
  <!-- geekblog include: sprites/geekblog.svg -->
  <svg class="svg-sprite" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><defs><svg viewBox="-7.27 -7.27 46.55 46.55" id="gblog_arrow_back" xmlns="http://www.w3.org/2000/svg"><path d="M31.999 14.035v3.93H7.673l11.134 11.228L16 32 .001 16.001 16 .002l2.807 2.807L7.673 14.037h24.326z"/></svg><svg viewBox="-7.27 -7.27 46.55 46.55" id="gblog_arrow_left" xmlns="http://www.w3.org/2000/svg"><path d="M7.954 17.965v5.988L.001 16l7.953-7.953v5.988H32v3.93H7.954z"/></svg><svg viewBox="-7.27 -7.27 46.55 46.55" id="gblog_arrow_right" xmlns="http://www.w3.org/2000/svg"><path d="M24.046 14.035V8.047L31.999 16l-7.953 7.953v-5.988H0v-3.93h24.046z"/></svg><svg viewBox="-7.27 -7.27 42.55 42.55" id="gblog_bitbucket" xmlns="http://www.w3.org/2000/svg"><path d="M15.905 13.355c.189 1.444-1.564 2.578-2.784 1.839-1.375-.602-1.375-2.784-.034-3.403 1.151-.705 2.818.223 2.818 1.564zm1.907-.361c-.309-2.44-3.076-4.056-5.328-3.042-1.426.636-2.389 2.148-2.32 3.747.086 2.097 2.08 3.815 4.176 3.626s3.729-2.234 3.472-4.331zm4.108-9.315c-.756-.997-2.045-1.169-3.179-1.358-3.214-.516-6.513-.533-9.727.034-1.066.172-2.269.361-2.939 1.323 1.1 1.031 2.664 1.186 4.073 1.358 2.544.327 5.156.344 7.699.017 1.426-.172 3.008-.309 4.073-1.375zm.979 17.788c-.481 1.684-.206 3.953-1.994 4.932-3.076 1.701-6.806 1.89-10.191 1.289-1.787-.327-3.884-.894-4.864-2.578-.43-1.65-.705-3.334-.98-5.018l.103-.275.309-.155c5.121 3.386 12.288 3.386 17.427 0 .808.241.206 1.22.189 1.805zM26.01 4.951c-.584 3.764-1.255 7.51-1.908 11.257-.189 1.1-1.255 1.719-2.148 2.183-3.214 1.615-6.96 1.89-10.483 1.512-2.389-.258-4.829-.894-6.771-2.389-.911-.705-.911-1.908-1.083-2.922-.602-3.523-1.289-7.046-1.719-10.604.206-1.547 1.942-2.217 3.231-2.698C6.848.654 8.686.362 10.508.19c3.884-.378 7.854-.241 11.618.859 1.341.395 2.784.945 3.695 2.097.412.533.275 1.203.189 1.805z"/></svg><svg viewBox="-7.27 -7.27 46.55 46.55" id="gblog_bookmark" xmlns="http://www.w3.org/2000/svg"><path d="M20.357 5.856q1.157 0 2.043.851t.885 2.008v23.284l-10.212-4.357-10.144 4.357V8.715q0-1.157.885-2.008t2.042-.851h14.502zm5.787 18.859V5.856q0-1.157-.851-2.042t-2.008-.885H8.715q0-1.157.885-2.042t2.043-.885h14.502q1.157 0 2.043.885t.885 2.042v23.216z"/></svg><svg viewBox="-7.27 -7.27 42.55 42.55" id="gblog_brightness_auto" xmlns="http://www.w3.org/2000/svg"><path d="M16.846 18.938h2.382L15.22 7.785h-2.44L8.772 18.938h2.382l.871-2.44h3.95zm7.087-9.062L27.999 14l-4.066 4.124v5.809h-5.809L14 27.999l-4.124-4.066H4.067v-5.809L.001 14l4.066-4.124V4.067h5.809L14 .001l4.124 4.066h5.809v5.809zm-11.385 4.937L14 10.282l1.452 4.531h-2.904z"/></svg><svg viewBox="-7.27 -7.27 42.55 42.55" id="gblog_brightness_dark" xmlns="http://www.w3.org/2000/svg"><path d="M14 21.435q3.079 0 5.257-2.178T21.435 14t-2.178-5.257T14 6.565q-1.51 0-3.079.697 1.917.871 3.108 2.701T15.22 14t-1.191 4.037-3.108 2.701q1.568.697 3.079.697zm9.933-11.559L27.999 14l-4.066 4.124v5.809h-5.809L14 27.999l-4.124-4.066H4.067v-5.809L.001 14l4.066-4.124V4.067h5.809L14 .001l4.124 4.066h5.809v5.809z"/></svg><svg viewBox="-7.27 -7.27 42.55 42.55" id="gblog_brightness_light" xmlns="http://www.w3.org/2000/svg"><path d="M14 21.435q3.079 0 5.257-2.178T21.435 14t-2.178-5.257T14 6.565 8.743 8.743 6.565 14t2.178 5.257T14 21.435zm9.933-3.311v5.809h-5.809L14 27.999l-4.124-4.066H4.067v-5.809L.001 14l4.066-4.124V4.067h5.809L14 .001l4.124 4.066h5.809v5.809L27.999 14z"/></svg><svg viewBox="-7.27 -7.27 42.55 42.55" id="gblog_check" xmlns="http://www.w3.org/2000/svg"><path d="M8.885 20.197L25.759 3.323l2.24 2.24L8.885 24.677 0 15.792l2.24-2.24z"/></svg><svg viewBox="-7.27 -7.27 42.55 42.55" id="gblog_check_circle_outline" xmlns="http://www.w3.org/2000/svg"><path d="M14 25.239q4.601 0 7.92-3.319T25.239 14 21.92 6.08 14 2.761 6.08 6.08 2.761 14t3.319 7.92T14 25.239zM14 0q5.784 0 9.892 4.108T28 14t-4.108 9.892T14 28t-9.892-4.108T0 14t4.108-9.892T14 0zm6.441 7.822l1.972 1.972-11.239 11.239L4.207 14l1.972-1.972 4.995 4.995z"/></svg><svg viewBox="-7.27 -7.27 46.55 46.55" id="gblog_clear" xmlns="http://www.w3.org/2000/svg"><path d="M32 3.222L19.222 16 32 28.778l-3.221 3.221-12.778-12.778L3.223 31.999.002 28.778 12.78 16 .002 3.222 3.223.001l12.778 12.778L28.779.001z"/></svg><svg viewBox="-7.27 -7.27 42.55 42.55" id="gblog_cloud_off" xmlns="http://www.w3.org/2000/svg"><path d="M9.023 10.5H7q-1.914 0-3.281 1.395t-1.367 3.309 1.367 3.281T7 19.852h11.375zM3.5 4.976l1.477-1.477L24.5 23.022l-1.477 1.477-2.352-2.297H6.999q-2.898 0-4.949-2.051t-2.051-4.949q0-2.844 1.969-4.867t4.758-2.133zm19.086 5.578q2.242.164 3.828 1.832T28 16.351q0 3.008-2.461 4.758l-1.695-1.695q1.805-.984 1.805-3.063 0-1.422-1.039-2.461t-2.461-1.039h-1.75v-.602q0-2.68-1.859-4.539t-4.539-1.859q-1.531 0-2.953.711l-1.75-1.695Q11.431 3.5 14.001 3.5q2.953 0 5.496 2.078t3.09 4.977z"/></svg><svg viewBox="-7.27 -7.27 42.55 42.55" id="gblog_code" xmlns="http://www.w3.org/2000/svg"><path d="M9.917 24.5a1.75 1.75 0 10-3.501.001 1.75 1.75 0 003.501-.001zm0-21a1.75 1.75 0 10-3.501.001A1.75 1.75 0 009.917 3.5zm11.666 2.333a1.75 1.75 0 10-3.501.001 1.75 1.75 0 003.501-.001zm1.75 0a3.502 3.502 0 01-1.75 3.026c-.055 6.581-4.721 8.039-7.82 9.023-2.898.911-3.846 1.349-3.846 3.117v.474a3.502 3.502 0 011.75 3.026c0 1.932-1.568 3.5-3.5 3.5s-3.5-1.568-3.5-3.5c0-1.294.711-2.424 1.75-3.026V6.526A3.502 3.502 0 014.667 3.5c0-1.932 1.568-3.5 3.5-3.5s3.5 1.568 3.5 3.5a3.502 3.502 0 01-1.75 3.026v9.06c.93-.456 1.914-.766 2.807-1.039 3.391-1.075 5.323-1.878 5.359-5.687a3.502 3.502 0 01-1.75-3.026c0-1.932 1.568-3.5 3.5-3.5s3.5 1.568 3.5 3.5z"/></svg><svg viewBox="-7.27 -7.27 46.55 46.55" id="gblog_contacts" xmlns="http://www.w3.org/2000/svg"><path d="M22.688 22.688v-2q0-1.5-2.281-2.438t-4.406-.938-4.406.938-2.281 2.438v2h13.375zM16 9q-1.25 0-2.125.875T13 12t.875 2.125T16 15t2.125-.875T19 12t-.875-2.125T16 9zm10.688-3.687q1.063 0 1.844.813t.781 1.875v16q0 1.063-.781 1.875t-1.844.813H5.313q-1.063 0-1.844-.813t-.781-1.875v-16q0-1.063.781-1.875t1.844-.813h21.375zM5.313 32v-2.688h21.375V32H5.313zM26.688 0v2.688H5.313V0h21.375z"/></svg><svg viewBox="-7.27 -7.27 42.55 42.55" id="gblog_copy" xmlns="http://www.w3.org/2000/svg"><path d="M23.502 25.438V7.626H9.562v17.812h13.94zm0-20.315q1.013 0 1.787.745t.774 1.757v17.812q0 1.013-.774 1.787t-1.787.774H9.562q-1.013 0-1.787-.774t-.774-1.787V7.625q0-1.013.774-1.757t1.787-.745h13.94zM19.689 0v2.562H4.438v17.812H1.936V2.562q0-1.013.745-1.787T4.438.001h15.251z"/></svg><svg viewBox="-7.27 -7.27 46.55 46.55" id="gblog_create" xmlns="http://www.w3.org/2000/svg"><path d="M31.499 7.167l-3.25 3.25-6.666-6.666 3.25-3.25q.5-.5 1.25-.5t1.25.5l4.166 4.166q.5.5.5 1.25t-.5 1.25zM.001 25.333L19.667 5.667l6.666 6.666L6.667 31.999H.001v-6.666z"/></svg><svg viewBox="-7.27 -7.27 42.55 42.55" id="gblog_dangerous" xmlns="http://www.w3.org/2000/svg"><path d="M21.802 19.833L15.969 14l5.833-5.833-1.969-1.969L14 12.031 8.167 6.198 6.198 8.167 12.031 14l-5.833 5.833 1.969 1.969L14 15.969l5.833 5.833zM19.833 0L28 8.167v11.666L19.833 28H8.167L0 19.833V8.167L8.167 0h11.666z"/></svg><svg viewBox="-7.27 -7.27 46.55 46.55" id="gblog_date" xmlns="http://www.w3.org/2000/svg"><path d="M27.192 28.844V11.192H4.808v17.652h22.384zm0-25.689q1.277 0 2.253.976t.976 2.253v22.459q0 1.277-.976 2.216t-2.253.939H4.808q-1.352 0-2.291-.901t-.939-2.253V6.385q0-1.277.939-2.253t2.291-.976h1.577V.001h3.23v3.155h12.769V.001h3.23v3.155h1.577zm-3.155 11.267v3.155h-3.23v-3.155h3.23zm-6.46 0v3.155h-3.155v-3.155h3.155zm-6.384 0v3.155h-3.23v-3.155h3.23z"/></svg><svg viewBox="-7.27 -7.27 46.55 46.55" id="gblog_download" xmlns="http://www.w3.org/2000/svg"><path d="M2.866 28.209h26.269v3.79H2.866v-3.79zm26.268-16.925L16 24.418 2.866 11.284h7.493V.001h11.283v11.283h7.493z"/></svg><svg viewBox="-7.27 -7.27 46.55 46.55" id="gblog_email" xmlns="http://www.w3.org/2000/svg"><path d="M28.845 9.615v-3.23L16 14.422 3.155 6.385v3.23L16 17.577zm0-6.46q1.277 0 2.216.977T32 6.385v19.23q0 1.277-.939 2.253t-2.216.977H3.155q-1.277 0-2.216-.977T0 25.615V6.385q0-1.277.939-2.253t2.216-.977h25.69z"/></svg><svg viewBox="-7.27 -7.27 42.55 42.55" id="gblog_error_outline" xmlns="http://www.w3.org/2000/svg"><path d="M14 25.239q4.601 0 7.92-3.319T25.239 14 21.92 6.08 14 2.761 6.08 6.08 2.761 14t3.319 7.92T14 25.239zM14 0q5.784 0 9.892 4.108T28 14t-4.108 9.892T14 28t-9.892-4.108T0 14t4.108-9.892T14 0zm-1.38 6.967h2.761v8.413H12.62V6.967zm0 11.239h2.761v2.826H12.62v-2.826z"/></svg><svg viewBox="-7.27 -7.27 42.55 42.55" id="gblog_fire" xmlns="http://www.w3.org/2000/svg"><path d="M17.689 21.998q-.32.32-.8.576t-.864.384q-1.152.384-2.272.032t-1.888-.992q-.128-.128-.096-.256t.16-.192q1.216-.384 1.92-1.216t.96-1.792q.192-.896-.064-1.728t-.384-1.728q-.128-.704-.096-1.376t.288-1.312q0-.128.128-.128t.192.064q.384.832.992 1.472t1.28 1.216 1.216 1.248.672 1.568q.064.384.064.704.064.96-.32 1.92t-1.088 1.536zm3.84-10.944q-.768-.704-1.6-1.28t-1.6-1.344q-1.536-1.536-2.016-3.584t.16-4.16q.128-.32-.096-.544t-.544-.096q-.768.32-1.44.768t-1.312.896q-1.984 1.664-3.136 3.936T8.633 10.51t.8 5.088q0 .128.032.256t.032.256q0 .576-.512.832t-1.024-.192q-.128-.192-.192-.32-1.024-1.28-1.376-2.912t-.096-3.232q.064-.384-.288-.576t-.608.128q-1.28 1.664-1.856 3.68t-.448 4.064q0 .576.096 1.184t.288 1.184q.448 1.536 1.216 2.816 1.216 2.048 3.264 3.424t4.416 1.696q2.496.32 5.024-.256t4.448-2.304q1.408-1.344 2.208-3.104t.864-3.68-.704-3.712q-.064-.128-.096-.224t-.096-.224q-.576-1.088-1.28-1.984-.256-.384-.544-.704t-.672-.64z"/></svg><svg viewBox="-7.27 -7.27 42.55 42.55" id="gblog_git" xmlns="http://www.w3.org/2000/svg"><path d="M27.472 12.753L15.247.529a1.803 1.803 0 00-2.55 0l-2.84 2.84 2.137 2.137a2.625 2.625 0 013.501 3.501l3.499 3.499a2.625 2.625 0 11-1.237 1.237l-3.499-3.499c-.083.04-.169.075-.257.106v7.3a2.626 2.626 0 11-1.75 0v-7.3a2.626 2.626 0 01-1.494-3.607L8.62 4.606l-8.09 8.09a1.805 1.805 0 000 2.551l12.225 12.224a1.803 1.803 0 002.55 0l12.168-12.168a1.805 1.805 0 000-2.551z"/></svg><svg viewBox="-7.27 -7.27 46.55 46.55" id="gblog_gitea" xmlns="http://www.w3.org/2000/svg"><path d="M5.581 7.229c-2.46-.005-5.755 1.559-5.573 5.48.284 6.125 6.56 6.693 9.068 6.743.275 1.149 3.227 5.112 5.412 5.32h9.573c5.741-.381 10.04-17.363 6.853-17.427-5.271.248-8.395.373-11.073.395v5.3l-.835-.369-.005-4.928c-3.075-.001-5.781-.144-10.919-.397-.643-.004-1.539-.113-2.501-.116zm.348 2.166h.293c.349 3.14.917 4.976 2.067 7.781-2.933-.347-5.429-1.199-5.888-4.38-.237-1.647.563-3.365 3.528-3.401zm11.409 3.087c.2.003.404.04.596.128l.999.431-.716 1.305h-.007a.996.996 0 00-.321.053l.006-.002c-.349.114-.593.406-.593.749 0 .097.019.189.055.275l-.002-.006a.767.767 0 00.151.233l-.001-.001-1.235 2.248a.99.99 0 00-.302.052l.006-.002c-.349.114-.593.406-.593.749 0 .097.019.189.055.275l-.002-.006c.128.31.457.527.843.527a.987.987 0 00.31-.049l-.006.002c.348-.114.592-.406.592-.749 0-.097-.02-.19-.056-.277l.002.006a.784.784 0 00-.211-.293l1.203-2.189a.999.999 0 00.397-.041l-.006.002a.942.942 0 00.285-.15l-.001.001c.464.195.844.353 1.117.488.411.203.556.337.6.487.044.147-.004.429-.236.925-.173.369-.46.893-.799 1.511h-.02a.991.991 0 00-.321.053l.006-.002c-.349.114-.593.406-.593.749 0 .097.019.189.055.275l-.002-.006c.128.31.457.527.843.527a.987.987 0 00.31-.049l-.006.002c.348-.114.592-.406.592-.749a.703.703 0 00-.055-.275l.002.006a.802.802 0 00-.183-.27l.001.001c.335-.611.623-1.136.808-1.531.251-.536.381-.935.267-1.32s-.467-.636-.933-.867c-.307-.151-.689-.311-1.147-.503a.723.723 0 00-.052-.324l.002.006a.792.792 0 00-.194-.279l.704-1.284 3.899 1.684c.704.305.995 1.053.653 1.68l-2.68 4.907c-.343.625-1.184.884-1.888.58l-5.516-2.384c-.704-.304-.996-1.053-.653-1.68l2.68-4.905c.235-.431.707-.687 1.207-.707z"/></svg><svg viewBox="-7.27 -7.27 46.55 46.55" id="gblog_github" xmlns="http://www.w3.org/2000/svg"><path d="M16 .394c8.833 0 15.999 7.166 15.999 15.999 0 7.062-4.583 13.062-10.937 15.187-.813.146-1.104-.354-1.104-.771 0-.521.021-2.25.021-4.396 0-1.5-.5-2.458-1.083-2.958 3.562-.396 7.312-1.75 7.312-7.896 0-1.75-.625-3.167-1.646-4.291.167-.417.708-2.042-.167-4.25-1.333-.417-4.396 1.646-4.396 1.646a15.032 15.032 0 00-8 0S8.937 6.602 7.603 7.018c-.875 2.208-.333 3.833-.167 4.25-1.021 1.125-1.646 2.542-1.646 4.291 0 6.125 3.729 7.5 7.291 7.896-.458.417-.875 1.125-1.021 2.146-.917.417-3.25 1.125-4.646-1.333-.875-1.521-2.458-1.646-2.458-1.646-1.562-.021-.104.979-.104.979 1.042.479 1.771 2.333 1.771 2.333.938 2.854 5.396 1.896 5.396 1.896 0 1.333.021 2.583.021 2.979 0 .417-.292.917-1.104.771C4.582 29.455-.001 23.455-.001 16.393-.001 7.56 7.165.394 15.998.394zM6.063 23.372c.042-.083-.021-.187-.146-.25-.125-.042-.229-.021-.271.042-.042.083.021.187.146.25.104.062.229.042.271-.042zm.646.709c.083-.062.062-.208-.042-.333-.104-.104-.25-.146-.333-.062-.083.062-.062.208.042.333.104.104.25.146.333.062zm.625.937c.104-.083.104-.25 0-.396-.083-.146-.25-.208-.354-.125-.104.062-.104.229 0 .375s.271.208.354.146zm.875.875c.083-.083.042-.271-.083-.396-.146-.146-.333-.167-.417-.062-.104.083-.062.271.083.396.146.146.333.167.417.062zm1.187.521c.042-.125-.083-.271-.271-.333-.167-.042-.354.021-.396.146s.083.271.271.312c.167.062.354 0 .396-.125zm1.313.104c0-.146-.167-.25-.354-.229-.187 0-.333.104-.333.229 0 .146.146.25.354.229.187 0 .333-.104.333-.229zm1.208-.208c-.021-.125-.187-.208-.375-.187-.187.042-.312.167-.292.312.021.125.187.208.375.167s.312-.167.292-.292z"/></svg><svg viewBox="-7.27 -7.27 42.55 42.55" id="gblog_gitlab" xmlns="http://www.w3.org/2000/svg"><path d="M1.629 11.034L14 26.888.442 17.048a1.09 1.09 0 01-.39-1.203l1.578-4.811zm7.217 0h10.309l-5.154 15.854zM5.753 1.475l3.093 9.559H1.63l3.093-9.559a.548.548 0 011.031 0zm20.618 9.559l1.578 4.811c.141.437-.016.922-.39 1.203l-13.558 9.84 12.371-15.854zm0 0h-7.216l3.093-9.559a.548.548 0 011.031 0z"/></svg><svg viewBox="-7.27 -7.27 46.55 46.55" id="gblog_heart" xmlns="http://www.w3.org/2000/svg"><path d="M16 29.714a1.11 1.11 0 01-.786-.321L4.072 18.643c-.143-.125-4.071-3.714-4.071-8 0-5.232 3.196-8.357 8.535-8.357 3.125 0 6.053 2.464 7.464 3.857 1.411-1.393 4.339-3.857 7.464-3.857 5.339 0 8.535 3.125 8.535 8.357 0 4.286-3.928 7.875-4.089 8.035L16.785 29.392c-.214.214-.5.321-.786.321z"/></svg><svg viewBox="-7.27 -7.27 42.55 42.55" id="gblog_info_outline" xmlns="http://www.w3.org/2000/svg"><path d="M12.62 9.793V6.967h2.761v2.826H12.62zM14 25.239q4.601 0 7.92-3.319T25.239 14 21.92 6.08 14 2.761 6.08 6.08 2.761 14t3.319 7.92T14 25.239zM14 0q5.784 0 9.892 4.108T28 14t-4.108 9.892T14 28t-9.892-4.108T0 14t4.108-9.892T14 0zm-1.38 21.033V12.62h2.761v8.413H12.62z"/></svg><svg viewBox="-7.27 -7.27 42.55 42.55" id="gblog_keyboard_arrow_down" xmlns="http://www.w3.org/2000/svg"><path d="M3.281 5.36L14 16.079 24.719 5.36 28 8.641l-14 14-14-14z"/></svg><svg viewBox="-7.27 -7.27 46.55 46.55" id="gblog_keyboard_arrow_left" xmlns="http://www.w3.org/2000/svg"><path d="M25.875 28.25L22.125 32 6.126 16.001 22.125.002l3.75 3.75-12.25 12.25z"/></svg><svg viewBox="-7.27 -7.27 46.55 46.55" id="gblog_keyboard_arrow_right" xmlns="http://www.w3.org/2000/svg"><path d="M6.125 28.25L18.375 16 6.125 3.75 9.875 0l15.999 15.999L9.875 31.998z"/></svg><svg viewBox="-7.27 -7.27 42.55 42.55" id="gblog_keyboard_arrow_up" xmlns="http://www.w3.org/2000/svg"><path d="M24.719 22.64L14 11.921 3.281 22.64 0 19.359l14-14 14 14z"/></svg><svg viewBox="-7.27 -7.27 46.55 46.55" id="gblog_link" xmlns="http://www.w3.org/2000/svg"><path d="M24.037 7.963q3.305 0 5.634 2.366T32 16t-2.329 5.671-5.634 2.366h-6.46v-3.08h6.46q2.028 0 3.493-1.465t1.465-3.493-1.465-3.493-3.493-1.465h-6.46v-3.08h6.46zM9.615 17.578v-3.155h12.77v3.155H9.615zM3.005 16q0 2.028 1.465 3.493t3.493 1.465h6.46v3.08h-6.46q-3.305 0-5.634-2.366T0 16.001t2.329-5.671 5.634-2.366h6.46v3.08h-6.46q-2.028 0-3.493 1.465t-1.465 3.493z"/></svg><svg viewBox="-7.27 -7.27 46.55 46.55" id="gblog_mastodon" xmlns="http://www.w3.org/2000/svg"><path d="M30.924 10.506c0-6.941-4.548-8.976-4.548-8.976C24.083.477 20.144.034 16.054.001h-.101C11.862.034 7.926.477 5.633 1.53c0 0-4.548 2.035-4.548 8.976 0 1.589-.031 3.491.02 5.505.165 6.79 1.245 13.479 7.522 15.14 2.893.765 5.379.927 7.38.816 3.629-.2 5.667-1.296 5.667-1.296l-.12-2.633s-2.593.817-5.505.719c-2.887-.099-5.932-.311-6.399-3.855a7.069 7.069 0 01-.064-.967v-.028.001s2.833.693 6.423.857c2.195.1 4.253-.129 6.344-.377 4.009-.479 7.5-2.949 7.939-5.207.689-3.553.633-8.676.633-8.676zm-5.366 8.945h-3.329v-8.159c0-1.72-.724-2.592-2.171-2.592-1.6 0-2.403 1.035-2.403 3.083v4.465h-3.311v-4.467c0-2.048-.803-3.083-2.403-3.083-1.447 0-2.171.873-2.171 2.592v8.159H6.441v-8.404c0-1.719.437-3.084 1.316-4.093.907-1.011 2.092-1.528 3.565-1.528 1.704 0 2.995.655 3.848 1.965l.828 1.391.829-1.391c.853-1.311 2.144-1.965 3.848-1.965 1.472 0 2.659.517 3.565 1.528.877 1.009 1.315 2.375 1.315 4.093z"/></svg><svg viewBox="-7.27 -7.27 46.55 46.55" id="gblog_matrix" xmlns="http://www.w3.org/2000/svg"><path d="M.843.734v30.532H3.04v.733H0V0h3.04v.733zm9.391 9.68v1.543h.044a4.417 4.417 0 011.489-1.365c.577-.327 1.248-.487 2-.487.72 0 1.377.143 1.975.419.597.277 1.047.776 1.36 1.477.339-.499.8-.941 1.379-1.323.579-.383 1.267-.573 2.061-.573.604 0 1.163.075 1.68.223a3.34 3.34 0 011.324.707c.368.327.652.745.861 1.268.203.523.307 1.151.307 1.889v7.637h-3.132v-6.468c0-.381-.013-.745-.043-1.083a2.315 2.315 0 00-.246-.893l.006.013a1.484 1.484 0 00-.577-.593l-.007-.004c-.259-.147-.609-.221-1.047-.221-.443 0-.8.085-1.071.252-.267.166-.483.39-.635.656l-.005.009a2.558 2.558 0 00-.307.915l-.002.013a7.156 7.156 0 00-.08 1.044v6.359h-3.133v-6.4c0-.339-.005-.671-.024-1.003a2.772 2.772 0 00-.197-.936l.007.019a1.41 1.41 0 00-.548-.667l-.006-.003c-.259-.167-.635-.253-1.139-.253-.148 0-.345.032-.585.099-.24.068-.48.191-.707.376-.228.184-.425.449-.585.793-.16.345-.24.8-.24 1.36v6.621H7.279v-11.42zm20.923 20.852V.734H28.96V.001H32V32h-3.04v-.733z"/></svg><svg viewBox="-7.27 -7.27 46.55 46.55" id="gblog_menu" xmlns="http://www.w3.org/2000/svg"><path d="M.001 5.334h31.998v3.583H.001V5.334zm0 12.416v-3.5h31.998v3.5H.001zm0 8.916v-3.583h31.998v3.583H.001z"/></svg><svg viewBox="-7.27 -7.27 46.55 46.55" id="gblog_notifications" xmlns="http://www.w3.org/2000/svg"><path d="M25.846 22.154l3.308 3.308v1.615H2.847v-1.615l3.308-3.308V14q0-3.846 1.961-6.692t5.423-3.692V2.462q0-1 .692-1.731T16 0t1.769.731.692 1.731v1.154q3.461.846 5.423 3.692T25.846 14v8.154zM16 32q-1.385 0-2.346-.923t-.962-2.308h6.615q0 1.308-1 2.269T15.999 32z"/></svg><svg viewBox="-7.27 -7.27 46.55 46.55" id="gblog_person" xmlns="http://www.w3.org/2000/svg"><path d="M16 20.023q5.052 0 10.526 2.199t5.473 5.754v4.023H0v-4.023q0-3.555 5.473-5.754t10.526-2.199zM16 16q-3.275 0-5.614-2.339T8.047 8.047t2.339-5.661T16 0t5.614 2.386 2.339 5.661-2.339 5.614T16 16z"/></svg><svg viewBox="-7.27 -7.27 46.55 46.55" id="gblog_pin" xmlns="http://www.w3.org/2000/svg"><path d="M17.6 19.2h9.6v-1.6L22.4 16V3.2l4.8-1.6V0H4.8v1.6l4.8 1.6V16l-4.8 1.6v1.6h9.6v11.2L16 32l1.6-1.6V19.2z"/></svg><svg viewBox="-7.27 -7.27 46.55 46.55" id="gblog_rss_feed" xmlns="http://www.w3.org/2000/svg"><path d="M-.481 12.048q8.482 0 14.457 5.976t5.976 14.457h-5.879q0-5.976-4.289-10.264T-.48 17.928v-5.879zm0-11.565q13.204 0 22.601 9.397t9.397 22.601h-5.783q0-10.891-7.662-18.553T-.481 6.266V.483zm0 27.468q0-1.831 1.301-3.132t3.229-1.301 3.181 1.253 1.253 3.181-1.301 3.229-3.132 1.301q-1.928 0-3.229-1.301T-.48 27.952z"/></svg><svg viewBox="-7.27 -7.27 46.55 46.55" id="gblog_search" xmlns="http://www.w3.org/2000/svg"><path d="M11.925 20.161q3.432 0 5.834-2.402t2.402-5.834-2.402-5.834-5.834-2.402-5.834 2.402-2.402 5.834 2.402 5.834 5.834 2.402zm10.981 0L32 29.255 29.255 32l-9.094-9.094v-1.458l-.515-.515q-3.26 2.831-7.721 2.831-4.976 0-8.45-3.432T.001 11.925t3.474-8.45 8.45-3.474 8.407 3.474 3.432 8.45q0 1.802-.858 4.075t-1.973 3.646l.515.515h1.458z"/></svg><svg viewBox="-7.27 -7.27 46.55 46.55" id="gblog_security" xmlns="http://www.w3.org/2000/svg"><path d="M16 0l13.072 5.855v8.715q0 6.059-3.745 11.063T16 31.999q-5.583-1.362-9.327-6.366T2.928 14.57V5.855zm0 16v13.004q4.017-1.294 6.808-4.868T26.144 16H16zm0 0V3.2L5.856 7.693v8.306H16z"/></svg><svg viewBox="-7.27 -7.27 42.55 42.55" id="gblog_star" xmlns="http://www.w3.org/2000/svg"><path d="M14 22.052L5.324 27.31l2.3-9.859L0 10.813l10.056-.854L14 .692l3.944 9.267L28 10.813l-7.624 6.638 2.3 9.859z"/></svg><svg viewBox="-7.27 -7.27 42.55 42.55" id="gblog_tag" xmlns="http://www.w3.org/2000/svg"><path d="M17.52 17.52v-7.041h-7.041v7.041h7.041zM28 10.479h-7.041v7.041H28v3.439h-7.041V28H17.52v-7.041h-7.041V28H7.04v-7.041H-.001V17.52H7.04v-7.041H-.001V7.04H7.04V-.001h3.439V7.04h7.041V-.001h3.439V7.04H28v3.439z"/></svg><svg viewBox="-7.27 -7.27 46.55 46.55" id="gblog_timer" xmlns="http://www.w3.org/2000/svg"><path d="M16 29q4.428 0 7.536-3.143t3.107-7.571-3.107-7.536T16 7.643 8.464 10.75t-3.107 7.536 3.107 7.571T16 29zM26.714 9.786q1.214 1.571 2.107 4.036t.893 4.464q0 5.643-4 9.678T16 32t-9.714-4.036-4-9.678 4-9.678T16 4.572q1.929 0 4.464.929t4.107 2.143l2.143-2.214q1.143.929 2.143 2.143zM14.5 19.857v-9.143h3v9.143h-3zM20.571.001v3.071h-9.143V.001h9.143z"/></svg><svg viewBox="-7.27 -7.27 46.55 46.55" id="gblog_tree" xmlns="http://www.w3.org/2000/svg"><path d="M32 14.423H20.808V9.616h-3.23v12.77h3.23v-4.807H32v12.845H20.808v-4.807h-6.385v-16h-3.23v4.807H.001V1.579h11.192v4.807h9.615V1.579H32v12.845z"/></svg><svg viewBox="-7.27 -7.27 46.55 46.55" id="gblog_xmpp" xmlns="http://www.w3.org/2000/svg"><path d="M31.995 4.237c-.449.175-1.12.433-1.936.745-1.544.591-2.328.891-2.924 1.093-.613.208-1.287.409-2.635.813-.911.272-1.672.495-2.212.651-.031.875 0 2.177-.292 3.635a21.837 21.837 0 01-2.016 5.765c-1.496 2.944-3.236 4.817-3.88 5.476-.056-.059-.112-.117-.168-.179-.707-.763-2.403-2.703-3.815-5.683-1.053-2.223-1.484-4.044-1.605-4.584-.356-1.589-.427-2.955-.427-4.117 0-.075-.036-.129-.101-.149-.721-.223-1.765-.519-2.887-.853-1.271-.379-2.193-.744-3.408-1.2-.493-.185-1.409-.547-2.217-.859C.723 4.499.113 4.236.041 4.236c-.005 0-.015 0-.023.012a.131.131 0 00-.019.076c.009.593.08 1.361.256 2.365.615 3.503 2.688 7.061 4.36 9.244 0 0 3.717 5.035 9.128 8.144l.303.176c-.009.008-.02.015-.028.021-1.717 1.316-3.201 1.977-3.579 2.14a15.71 15.71 0 01-2.219.772v.407a25.31 25.31 0 002.72-.487 26.72 26.72 0 005.075-1.792c.136.067.276.136.42.204 1.527.725 3.571 1.627 6.073 2.048.613.103 1.136.165 1.507.195a.109.109 0 00.115-.091.55.55 0 00.004-.217.107.107 0 00-.063-.073c-.505-.209-1.201-.4-1.983-.719-.935-.381-2.241-1.067-3.648-2.128a13.528 13.528 0 01-.367-.287c4.64-2.656 7.989-6.588 7.989-6.588 1.735-2.036 4.441-5.623 5.431-9.795.349-1.473.539-2.741.5-3.628z"/></svg></defs></svg>

  <!-- geekblog include: sprites/linkedin.svg -->
  <svg width="0" height="0" class="hidden">
  <symbol xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" id="linkedin">
    <path d="M19 0h-14c-2.761 0-5 2.239-5 5v14c0 2.761 2.239 5 5 5h14c2.762 0 5-2.239 5-5v-14c0-2.761-2.238-5-5-5zm-11 19h-3v-11h3v11zm-1.5-12.268c-.966 0-1.75-.79-1.75-1.764s.784-1.764 1.75-1.764 1.75.79 1.75 1.764-.783 1.764-1.75 1.764zm13.5 12.268h-3v-5.604c0-3.368-4-3.113-4 0v5.604h-3v-11h3v1.765c1.396-2.586 7-2.777 7 2.476v6.759z"></path>
  </symbol>
</svg>




    <div
      class="wrapper "
    >
      <header class="gblog-header">
  <div class="container flex flex-wrap">
    <div class="gblog-header__col-1 flex justify-start hidden-mobile"></div>
    <div class="gblog-header__col-2 flex align-center justify-center ">
      <a class="gblog-header__link" rel="me" href="https://iserghini.github.io/">
        <span class="gblog-brand flex align-center justify-center">
          <img
            class="gblog-brand__img"
            src="/logo-1.svg"
            alt=""
          />
          <span class="gblog-brand__title">Ismael Serghini&#39;s Blog</span>
        </span>
        
      </a>
    </div>
    <div class="gblog-header__col-3 flex justify-end">
      <span id="gblog-color-theme">
        <svg class="gblog-icon gblog_brightness_dark">
          <title></title>
          <use xlink:href="#gblog_brightness_dark"></use>
        </svg>
        <svg class="gblog-icon gblog_brightness_light">
          <title></title>
          <use xlink:href="#gblog_brightness_light"></use>
        </svg>
        <svg class="gblog-icon gblog_brightness_auto">
          <title></title>
          <use xlink:href="#gblog_brightness_auto"></use>
        </svg>
      </span>
    </div>
  </div>
</header>
<nav class="gblog-nav">
  <input type="checkbox" id="menu-control" class="hidden" />
  <div class="gblog-nav__control">
    <label for="menu-control" class="flex align-center justify-center">
      <svg class="gblog-icon gblog_menu"><use xlink:href="#gblog_menu"></use></svg>
      <svg class="gblog-icon gblog_clear"><use xlink:href="#gblog_clear"></use></svg>
      <span>Navigation</span>
    </label>
  </div>
  <ul class="gblog-nav__list container flex flex-wrap justify-center menu-content">
    
    
      
    
    
      

  
  
  

  
    
      
      
      

      
        <li>
          <a
            href="/"
            class="gblog-nav__entry"
          >
            <span class="flex align-center">
              
                <svg class="gblog-icon gblog_menu"><use xlink:href="#gblog_menu"></use></svg>
              
              <span>
                Home
              </span>
            </span>
          </a>
        </li>
      
    
  
    
      
      
      

      
        <li>
          <a
            href="/about/"
            class="gblog-nav__entry"
          >
            <span class="flex align-center">
              
                <svg class="gblog-icon gblog_person"><use xlink:href="#gblog_person"></use></svg>
              
              <span>
                About
              </span>
            </span>
          </a>
        </li>
      
    
  
    
      
      
      

      
        <li>
          <a
            href="https://www.linkedin.com/in/ismael-serghini-772a80110/"
            class="gblog-nav__entry"
          >
            <span class="flex align-center">
              
                <svg class="gblog-icon linkedin"><use xlink:href="#linkedin"></use></svg>
              
              <span>
                
              </span>
            </span>
          </a>
        </li>
      
    
  
    
      
      
      

      
        <li>
          <a
            href="https://github.com/iserghini/"
            class="gblog-nav__entry"
          >
            <span class="flex align-center">
              
                <svg class="gblog-icon gblog_github"><use xlink:href="#gblog_github"></use></svg>
              
              <span>
                
              </span>
            </span>
          </a>
        </li>
      
    
  






    
  </ul>
</nav>



      <main class="gblog-page container">
        
  <article class="gblog-post">
    <header class="gblog-post__header">
      
      


      <h1 class="gblog-post__title">Netbox automation using Pynetbox</h1>

      
    </header>
    <section class="gblog-markdown">
      <p>Pynetbox is a Python API client library for Netbox. In other words, it&rsquo;s a library that does all the heavy lifting for us when dealing with the Netbox API. It saves us from crafting our API calls using the Python Requests library or the like<sup id="fnref:1"><a href="#fn:1" class="footnote-ref" role="doc-noteref">1</a></sup>.</p>
<p>Where I see it especially useful is when it comes to how easy it makes it to search, update or delete existing data. Once you understand its structure (hopefully by the end of reading this post you will), you find it intuitive and easy to get useful work done quickly.</p>
  <div class="gblog-toc gblog-toc__level--6">
    <nav id="TableOfContents"><ul>
        <li><a href="#installing-pynetbox-and-generating-a-token">Installing Pynetbox and generating a token</a></li>
        <li><a href="#understanding-the-pynetbox-api">Understanding the Pynetbox API</a>
          <ul>
            <li><a href="#api-object">.api() object</a></li>
            <li><a href="#netbox-apps">Netbox apps</a></li>
            <li><a href="#endpoints">Endpoints</a></li>
            <li><a href="#methods">Methods</a>
              <ul>
                <li><a href="#data-retrieval">Data retrieval</a>
                  <ul>
                    <li><a href="#all-method">all() method</a></li>
                    <li><a href="#choices-method">choices() method</a></li>
                    <li><a href="#count-method">count() method</a></li>
                    <li><a href="#filter-method">filter() method</a></li>
                    <li><a href="#get-method">get() method</a></li>
                  </ul>
                </li>
                <li><a href="#working-with-the-data">Working with the data</a>
                  <ul>
                    <li><a href="#create-method">create() method</a></li>
                    <li><a href="#save-method">save() method</a></li>
                    <li><a href="#update-method">update() method</a></li>
                    <li><a href="#delete-method">delete() method</a></li>
                  </ul>
                </li>
              </ul>
            </li>
          </ul>
        </li>
        <li><a href="#conclusion">Conclusion</a></li>
        <li><a href="#further-reading">Further Reading</a></li>
      </ul></nav>
    <hr />
  </div>


<div class="gblog-post__anchorwrap">
    <h2 id="installing-pynetbox-and-generating-a-token">
        Installing Pynetbox and generating a token
        <a data-clipboard-text="https://iserghini.github.io/posts/netbox-automation-using-pynetbox/#installing-pynetbox-and-generating-a-token" class="gblog-post__anchor clip flex align-center" aria-label="Anchor Installing Pynetbox and generating a token" href="#installing-pynetbox-and-generating-a-token">
            <svg class="gblog-icon gblog_link"><use xlink:href="#gblog_link"></use></svg>
        </a>
    </h2>
</div>
<p>The installation is very easy as we can directly use pip for it:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="line"><span class="cl"><span class="n">pip</span> <span class="n">install</span> <span class="n">pynetbox</span>
</span></span></code></pre></div><p>If we want to not only get information from Netbox but to create it, we need a read and write access token - this is actually what we want here.</p>
<p>In order to create a token, you need to do the following:</p>
<ol>
<li>Go to the Netbox admin panel.</li>
</ol>



  <div class="flex justify-center">
    <figure
      class="gblog-post__figure"
    >
      <a class="gblog-markdown__link--raw" href="https://iserghini.github.io/posts/netbox-automation-using-pynetbox/images/token1.png">
        <picture>
          <source
              srcset="https://iserghini.github.io/posts/netbox-automation-using-pynetbox/images/token1_huc3b53b2bb2e9a7b5f020290bda06ce43_431143_600x0_resize_box_3.png 600w, https://iserghini.github.io/posts/netbox-automation-using-pynetbox/images/token1_huc3b53b2bb2e9a7b5f020290bda06ce43_431143_1200x0_resize_box_3.png 1200w" sizes="100vw"
          />
          <img
            src="https://iserghini.github.io/posts/netbox-automation-using-pynetbox/images/token1_huc3b53b2bb2e9a7b5f020290bda06ce43_431143_1800x0_resize_box_3.png"
            alt=""
          />
        </picture>
      </a>
    </figure>
  </div>

<ol start="2">
<li>Under users, add Token.</li>
</ol>



  <div class="flex justify-center">
    <figure
      class="gblog-post__figure"
    >
      <a class="gblog-markdown__link--raw" href="https://iserghini.github.io/posts/netbox-automation-using-pynetbox/images/token2.png">
        <picture>
          <source
              srcset="https://iserghini.github.io/posts/netbox-automation-using-pynetbox/images/token2_huc3b53b2bb2e9a7b5f020290bda06ce43_283157_600x0_resize_box_3.png 600w, https://iserghini.github.io/posts/netbox-automation-using-pynetbox/images/token2_huc3b53b2bb2e9a7b5f020290bda06ce43_283157_1200x0_resize_box_3.png 1200w" sizes="100vw"
          />
          <img
            src="https://iserghini.github.io/posts/netbox-automation-using-pynetbox/images/token2_huc3b53b2bb2e9a7b5f020290bda06ce43_283157_1800x0_resize_box_3.png"
            alt=""
          />
        </picture>
      </a>
    </figure>
  </div>

<ol start="3">
<li>Select the user, click &lsquo;write enabled&rsquo; and &lsquo;save&rsquo;.</li>
</ol>



  <div class="flex justify-center">
    <figure
      class="gblog-post__figure"
    >
      <a class="gblog-markdown__link--raw" href="https://iserghini.github.io/posts/netbox-automation-using-pynetbox/images/token3.png">
        <picture>
          <source
              srcset="https://iserghini.github.io/posts/netbox-automation-using-pynetbox/images/token3_huc3b53b2bb2e9a7b5f020290bda06ce43_325866_600x0_resize_box_3.png 600w, https://iserghini.github.io/posts/netbox-automation-using-pynetbox/images/token3_huc3b53b2bb2e9a7b5f020290bda06ce43_325866_1200x0_resize_box_3.png 1200w" sizes="100vw"
          />
          <img
            src="https://iserghini.github.io/posts/netbox-automation-using-pynetbox/images/token3_huc3b53b2bb2e9a7b5f020290bda06ce43_325866_1800x0_resize_box_3.png"
            alt=""
          />
        </picture>
      </a>
    </figure>
  </div>






<blockquote class="gblog-hint note">
  <div class="gblog-hint__title flex align-center"><i class="fa note" title="Note"></i></div>
  <div class="gblog-hint__text">If you&rsquo;ve followed the tutorial 
<a href="https://iserghini.com/posts/docker-netbox-and-api/" target="_blank">here</a>

 to build Netbox Docker, you should already have a write-enabled token - the same I&rsquo;m using in the upcoming examples.</div>
</blockquote>

<div class="gblog-post__anchorwrap">
    <h2 id="understanding-the-pynetbox-api">
        Understanding the Pynetbox API
        <a data-clipboard-text="https://iserghini.github.io/posts/netbox-automation-using-pynetbox/#understanding-the-pynetbox-api" class="gblog-post__anchor clip flex align-center" aria-label="Anchor Understanding the Pynetbox API" href="#understanding-the-pynetbox-api">
            <svg class="gblog-icon gblog_link"><use xlink:href="#gblog_link"></use></svg>
        </a>
    </h2>
</div>
<p>As per the Pynetbox Github&rsquo;s 
<a href="https://github.com/netbox-community/pynetbox" target="_blank">page</a>

:</p>
<blockquote>
<p>The pynetbox API is setup so that NetBox&rsquo;s apps are attributes of the .api() object, and in turn those apps have attribute representing each endpoint. Each endpoint has a handful of methods available to carry out actions on the endpoint.</p>
</blockquote>
<p>As the saying goes&hellip;a picture is worth a thousand words:</p>



  <div class="flex justify-center">
    <figure
      class="gblog-post__figure"
    >
      <a class="gblog-markdown__link--raw" href="https://iserghini.github.io/posts/netbox-automation-using-pynetbox/images/pynetbox_api_structure.png">
        <picture>
          <source
              srcset="https://iserghini.github.io/posts/netbox-automation-using-pynetbox/images/pynetbox_api_structure_hub8b4e4f39c66a7eaee12ab97e34435f5_749432_600x0_resize_box_3.png 600w, https://iserghini.github.io/posts/netbox-automation-using-pynetbox/images/pynetbox_api_structure_hub8b4e4f39c66a7eaee12ab97e34435f5_749432_1200x0_resize_box_3.png 1200w" sizes="100vw"
          />
          <img
            src="https://iserghini.github.io/posts/netbox-automation-using-pynetbox/images/pynetbox_api_structure_hub8b4e4f39c66a7eaee12ab97e34435f5_749432_1800x0_resize_box_3.png"
            alt=""
          />
        </picture>
      </a>
    </figure>
  </div>

<div class="gblog-post__anchorwrap">
    <h3 id="api-object">
        .api() object
        <a data-clipboard-text="https://iserghini.github.io/posts/netbox-automation-using-pynetbox/#api-object" class="gblog-post__anchor clip flex align-center" aria-label="Anchor .api() object" href="#api-object">
            <svg class="gblog-icon gblog_link"><use xlink:href="#gblog_link"></use></svg>
        </a>
    </h3>
</div>
<p>The first thing we need to do to work with Pynetbox is to instantiate the API object, everything else we discuss from here on assumes we have the &rsquo;nb&rsquo; API object<sup id="fnref:2"><a href="#fn:2" class="footnote-ref" role="doc-noteref">2</a></sup>.</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-py" data-lang="py"><span class="line"><span class="cl"><span class="kn">import</span> <span class="nn">pynetbox</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="n">NETBOX_URL</span> <span class="o">=</span> <span class="s1">&#39;http://localhost:8000&#39;</span>
</span></span><span class="line"><span class="cl"><span class="n">TOKEN</span> <span class="o">=</span> <span class="s1">&#39;0123456789abcdef0123456789abcdef01234567&#39;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="n">nb</span> <span class="o">=</span> <span class="n">pynetbox</span><span class="o">.</span><span class="n">api</span><span class="p">(</span><span class="n">url</span><span class="o">=</span><span class="n">NETBOX_URL</span><span class="p">,</span> <span class="n">token</span><span class="o">=</span><span class="n">TOKEN</span><span class="p">)</span>
</span></span></code></pre></div><p>There&rsquo;s also the option to include multi-thread calls for the .filter() and .all() methods by adding the following extra parameter:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="line"><span class="cl"><span class="n">nb</span> <span class="o">=</span> <span class="n">pynetbox</span><span class="o">.</span><span class="n">api</span><span class="p">(</span><span class="n">url</span><span class="o">=</span><span class="n">NETBOX_URL</span><span class="p">,</span> <span class="n">token</span><span class="o">=</span><span class="n">TOKEN</span><span class="p">,</span> <span class="n">threading</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</span></span></code></pre></div><div class="gblog-post__anchorwrap">
    <h3 id="netbox-apps">
        Netbox apps
        <a data-clipboard-text="https://iserghini.github.io/posts/netbox-automation-using-pynetbox/#netbox-apps" class="gblog-post__anchor clip flex align-center" aria-label="Anchor Netbox apps" href="#netbox-apps">
            <svg class="gblog-icon gblog_link"><use xlink:href="#gblog_link"></use></svg>
        </a>
    </h3>
</div>
<p>These are the top-level hierarchies for the type of data we can retrieve, create, modify and delete. Below are all the apps supported by Pynetbox:</p>
<ul>
<li>dcim</li>
<li>ipam</li>
<li>circuits</li>
<li>secrets (on NetBox 2.11 and older)</li>
<li>tenancy</li>
<li>extras</li>
<li>virtualization</li>
<li>users (since NetBox 2.9)</li>
<li>wireless (since NetBox 3.1)</li>
</ul>
<p>If you go to the API documentation 
<a href="http://localhost:8000/api/docs/" target="_blank">http://localhost:8000/api/docs/</a>

  you will find all the above apps - you may think that&rsquo;s exactly what&rsquo;s above, but wait for the next section.</p>



  <div class="flex justify-center">
    <figure
      class="gblog-post__figure"
    >
      <a class="gblog-markdown__link--raw" href="https://iserghini.github.io/posts/netbox-automation-using-pynetbox/images/netbox_apps.png">
        <picture>
          <source
              srcset="https://iserghini.github.io/posts/netbox-automation-using-pynetbox/images/netbox_apps_hu3696feb47ffc8771e71e48c2c1a4779a_108804_600x0_resize_box_3.png 600w, https://iserghini.github.io/posts/netbox-automation-using-pynetbox/images/netbox_apps_hu3696feb47ffc8771e71e48c2c1a4779a_108804_1200x0_resize_box_3.png 1200w" sizes="100vw"
          />
          <img
            src="https://iserghini.github.io/posts/netbox-automation-using-pynetbox/images/netbox_apps_hu3696feb47ffc8771e71e48c2c1a4779a_108804_1800x0_resize_box_3.png"
            alt=""
          />
        </picture>
      </a>
    </figure>
  </div>

<div class="gblog-post__anchorwrap">
    <h3 id="endpoints">
        Endpoints
        <a data-clipboard-text="https://iserghini.github.io/posts/netbox-automation-using-pynetbox/#endpoints" class="gblog-post__anchor clip flex align-center" aria-label="Anchor Endpoints" href="#endpoints">
            <svg class="gblog-icon gblog_link"><use xlink:href="#gblog_link"></use></svg>
        </a>
    </h3>
</div>
<p>Here&rsquo;s where we find the specifics for the general data we selected in the previous step. For instance, we use apps to distinguish between DCIM (physical stuff) and IPAM (IP address management), but once we&rsquo;ve done that, how do we know how to interact with &ldquo;cables&rdquo; specifically? That&rsquo;s what endpoints is all about.</p>
<p>In the API documentation, if we click on the /dcim/ section (already clicked by default), we find all the options available (not all shown in the screenshot):</p>



  <div class="flex justify-center">
    <figure
      class="gblog-post__figure"
    >
      <a class="gblog-markdown__link--raw" href="https://iserghini.github.io/posts/netbox-automation-using-pynetbox/images/api1.png">
        <picture>
          <source
              srcset="https://iserghini.github.io/posts/netbox-automation-using-pynetbox/images/api1_huc3b53b2bb2e9a7b5f020290bda06ce43_511733_600x0_resize_box_3.png 600w, https://iserghini.github.io/posts/netbox-automation-using-pynetbox/images/api1_huc3b53b2bb2e9a7b5f020290bda06ce43_511733_1200x0_resize_box_3.png 1200w" sizes="100vw"
          />
          <img
            src="https://iserghini.github.io/posts/netbox-automation-using-pynetbox/images/api1_huc3b53b2bb2e9a7b5f020290bda06ce43_511733_1800x0_resize_box_3.png"
            alt=""
          />
        </picture>
      </a>
    </figure>
  </div>

<p>From the above, we understand that to deal with cables we need:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-py" data-lang="py"><span class="line"><span class="cl"><span class="n">nb</span><span class="o">.</span><span class="n">dcim</span><span class="o">.</span><span class="n">cables</span><span class="o">.</span><span class="err">?????</span>
</span></span></code></pre></div><p>We&rsquo;re almost there, just one more step left: methods.</p>
<div class="gblog-post__anchorwrap">
    <h3 id="methods">
        Methods
        <a data-clipboard-text="https://iserghini.github.io/posts/netbox-automation-using-pynetbox/#methods" class="gblog-post__anchor clip flex align-center" aria-label="Anchor Methods" href="#methods">
            <svg class="gblog-icon gblog_link"><use xlink:href="#gblog_link"></use></svg>
        </a>
    </h3>
</div>
<p>At a high level we can divide them in two categories: methods to retrieve data from Netbox and methods to work with the data, whether is creating, modifying, or deleting it.</p>
<div class="gblog-post__anchorwrap">
    <h4 id="data-retrieval">
        Data retrieval
        <a data-clipboard-text="https://iserghini.github.io/posts/netbox-automation-using-pynetbox/#data-retrieval" class="gblog-post__anchor clip flex align-center" aria-label="Anchor Data retrieval" href="#data-retrieval">
            <svg class="gblog-icon gblog_link"><use xlink:href="#gblog_link"></use></svg>
        </a>
    </h4>
</div>
<p>These are the main methods to retrieve information from Netbox, I won&rsquo;t be covering all the methods/features so, please check the documentation to find all the details.</p>
<div class="gblog-post__anchorwrap">
    <h5 id="all-method">
        all() method
        <a data-clipboard-text="https://iserghini.github.io/posts/netbox-automation-using-pynetbox/#all-method" class="gblog-post__anchor clip flex align-center" aria-label="Anchor all() method" href="#all-method">
            <svg class="gblog-icon gblog_link"><use xlink:href="#gblog_link"></use></svg>
        </a>
    </h5>
</div>
<p>Returns all objects from a given endpoint. Example:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="line"><span class="cl"><span class="n">In</span> <span class="p">[</span><span class="mi">15</span><span class="p">]:</span> <span class="n">vendors_all</span> <span class="o">=</span> <span class="n">nb</span><span class="o">.</span><span class="n">dcim</span><span class="o">.</span><span class="n">manufacturers</span><span class="o">.</span><span class="n">all</span><span class="p">()</span>
</span></span><span class="line"><span class="cl"><span class="n">In</span> <span class="p">[</span><span class="mi">16</span><span class="p">]:</span> <span class="k">for</span> <span class="n">vendor</span> <span class="ow">in</span> <span class="n">vendors_all</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">    <span class="o">...</span><span class="p">:</span>     <span class="nb">print</span><span class="p">(</span><span class="n">vendor</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="o">...</span><span class="p">:</span> 
</span></span><span class="line"><span class="cl"><span class="n">Arista</span>
</span></span><span class="line"><span class="cl"><span class="n">Cisco</span>
</span></span><span class="line"><span class="cl"><span class="n">Fortinet</span>
</span></span><span class="line"><span class="cl"><span class="n">Juniper</span>
</span></span></code></pre></div><div class="gblog-post__anchorwrap">
    <h5 id="choices-method">
        choices() method
        <a data-clipboard-text="https://iserghini.github.io/posts/netbox-automation-using-pynetbox/#choices-method" class="gblog-post__anchor clip flex align-center" aria-label="Anchor choices() method" href="#choices-method">
            <svg class="gblog-icon gblog_link"><use xlink:href="#gblog_link"></use></svg>
        </a>
    </h5>
</div>
<p>Returns all choices from a given endpoint, keep in mind that this method is totally dependent on the endpoint you&rsquo;re querying, as you&rsquo;re going to see next, some endpoints don&rsquo;t show anything.</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-py" data-lang="py"><span class="line"><span class="cl"><span class="n">In</span> <span class="p">[</span><span class="mi">17</span><span class="p">]:</span> <span class="n">nb</span><span class="o">.</span><span class="n">dcim</span><span class="o">.</span><span class="n">manufacturers</span><span class="o">.</span><span class="n">choices</span><span class="p">()</span>
</span></span><span class="line"><span class="cl"><span class="n">Out</span><span class="p">[</span><span class="mi">17</span><span class="p">]:</span> <span class="p">{}</span>
</span></span><span class="line"><span class="cl"><span class="n">In</span> <span class="p">[</span><span class="mi">18</span><span class="p">]:</span> <span class="n">pprint</span><span class="p">(</span><span class="n">nb</span><span class="o">.</span><span class="n">dcim</span><span class="o">.</span><span class="n">devices</span><span class="o">.</span><span class="n">choices</span><span class="p">())</span>
</span></span><span class="line"><span class="cl"><span class="p">{</span><span class="s1">&#39;airflow&#39;</span><span class="p">:</span> <span class="p">[{</span><span class="s1">&#39;display_name&#39;</span><span class="p">:</span> <span class="s1">&#39;Front to rear&#39;</span><span class="p">,</span> <span class="s1">&#39;value&#39;</span><span class="p">:</span> <span class="s1">&#39;front-to-rear&#39;</span><span class="p">},</span>
</span></span><span class="line"><span class="cl">             <span class="p">{</span><span class="s1">&#39;display_name&#39;</span><span class="p">:</span> <span class="s1">&#39;Rear to front&#39;</span><span class="p">,</span> <span class="s1">&#39;value&#39;</span><span class="p">:</span> <span class="s1">&#39;rear-to-front&#39;</span><span class="p">},</span>
</span></span><span class="line"><span class="cl">             <span class="p">{</span><span class="s1">&#39;display_name&#39;</span><span class="p">:</span> <span class="s1">&#39;Left to right&#39;</span><span class="p">,</span> <span class="s1">&#39;value&#39;</span><span class="p">:</span> <span class="s1">&#39;left-to-right&#39;</span><span class="p">},</span>
</span></span><span class="line"><span class="cl">             <span class="p">{</span><span class="s1">&#39;display_name&#39;</span><span class="p">:</span> <span class="s1">&#39;Right to left&#39;</span><span class="p">,</span> <span class="s1">&#39;value&#39;</span><span class="p">:</span> <span class="s1">&#39;right-to-left&#39;</span><span class="p">},</span>
</span></span><span class="line"><span class="cl">             <span class="p">{</span><span class="s1">&#39;display_name&#39;</span><span class="p">:</span> <span class="s1">&#39;Side to rear&#39;</span><span class="p">,</span> <span class="s1">&#39;value&#39;</span><span class="p">:</span> <span class="s1">&#39;side-to-rear&#39;</span><span class="p">},</span>
</span></span><span class="line"><span class="cl">             <span class="p">{</span><span class="s1">&#39;display_name&#39;</span><span class="p">:</span> <span class="s1">&#39;Passive&#39;</span><span class="p">,</span> <span class="s1">&#39;value&#39;</span><span class="p">:</span> <span class="s1">&#39;passive&#39;</span><span class="p">},</span>
</span></span><span class="line"><span class="cl">             <span class="p">{</span><span class="s1">&#39;display_name&#39;</span><span class="p">:</span> <span class="s1">&#39;Mixed&#39;</span><span class="p">,</span> <span class="s1">&#39;value&#39;</span><span class="p">:</span> <span class="s1">&#39;mixed&#39;</span><span class="p">}],</span>
</span></span><span class="line"><span class="cl"> <span class="s1">&#39;face&#39;</span><span class="p">:</span> <span class="p">[{</span><span class="s1">&#39;display_name&#39;</span><span class="p">:</span> <span class="s1">&#39;Front&#39;</span><span class="p">,</span> <span class="s1">&#39;value&#39;</span><span class="p">:</span> <span class="s1">&#39;front&#39;</span><span class="p">},</span>
</span></span><span class="line"><span class="cl">          <span class="p">{</span><span class="s1">&#39;display_name&#39;</span><span class="p">:</span> <span class="s1">&#39;Rear&#39;</span><span class="p">,</span> <span class="s1">&#39;value&#39;</span><span class="p">:</span> <span class="s1">&#39;rear&#39;</span><span class="p">}],</span>
</span></span><span class="line"><span class="cl"> <span class="s1">&#39;status&#39;</span><span class="p">:</span> <span class="p">[{</span><span class="s1">&#39;display_name&#39;</span><span class="p">:</span> <span class="s1">&#39;Offline&#39;</span><span class="p">,</span> <span class="s1">&#39;value&#39;</span><span class="p">:</span> <span class="s1">&#39;offline&#39;</span><span class="p">},</span>
</span></span><span class="line"><span class="cl">            <span class="p">{</span><span class="s1">&#39;display_name&#39;</span><span class="p">:</span> <span class="s1">&#39;Active&#39;</span><span class="p">,</span> <span class="s1">&#39;value&#39;</span><span class="p">:</span> <span class="s1">&#39;active&#39;</span><span class="p">},</span>
</span></span><span class="line"><span class="cl">            <span class="p">{</span><span class="s1">&#39;display_name&#39;</span><span class="p">:</span> <span class="s1">&#39;Planned&#39;</span><span class="p">,</span> <span class="s1">&#39;value&#39;</span><span class="p">:</span> <span class="s1">&#39;planned&#39;</span><span class="p">},</span>
</span></span><span class="line"><span class="cl">            <span class="p">{</span><span class="s1">&#39;display_name&#39;</span><span class="p">:</span> <span class="s1">&#39;Staged&#39;</span><span class="p">,</span> <span class="s1">&#39;value&#39;</span><span class="p">:</span> <span class="s1">&#39;staged&#39;</span><span class="p">},</span>
</span></span><span class="line"><span class="cl">            <span class="p">{</span><span class="s1">&#39;display_name&#39;</span><span class="p">:</span> <span class="s1">&#39;Failed&#39;</span><span class="p">,</span> <span class="s1">&#39;value&#39;</span><span class="p">:</span> <span class="s1">&#39;failed&#39;</span><span class="p">},</span>
</span></span><span class="line"><span class="cl">            <span class="p">{</span><span class="s1">&#39;display_name&#39;</span><span class="p">:</span> <span class="s1">&#39;Inventory&#39;</span><span class="p">,</span> <span class="s1">&#39;value&#39;</span><span class="p">:</span> <span class="s1">&#39;inventory&#39;</span><span class="p">},</span>
</span></span><span class="line"><span class="cl">            <span class="p">{</span><span class="s1">&#39;display_name&#39;</span><span class="p">:</span> <span class="s1">&#39;Decommissioning&#39;</span><span class="p">,</span> <span class="s1">&#39;value&#39;</span><span class="p">:</span> <span class="s1">&#39;decommissioning&#39;</span><span class="p">}]}</span>
</span></span></code></pre></div><p>For the &ldquo;manufacturers&rdquo; endpoint we don&rsquo;t have any choices, as opposed to the &ldquo;devices&rdquo; one which does have some.</p>
<div class="gblog-post__anchorwrap">
    <h5 id="count-method">
        count() method
        <a data-clipboard-text="https://iserghini.github.io/posts/netbox-automation-using-pynetbox/#count-method" class="gblog-post__anchor clip flex align-center" aria-label="Anchor count() method" href="#count-method">
            <svg class="gblog-icon gblog_link"><use xlink:href="#gblog_link"></use></svg>
        </a>
    </h5>
</div>
<p>It counts the number of matches for your specific query:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="line"><span class="cl"><span class="n">In</span> <span class="p">[</span><span class="mi">21</span><span class="p">]:</span> <span class="n">nb</span><span class="o">.</span><span class="n">dcim</span><span class="o">.</span><span class="n">manufacturers</span><span class="o">.</span><span class="n">count</span><span class="p">()</span>
</span></span><span class="line"><span class="cl"><span class="n">Out</span><span class="p">[</span><span class="mi">21</span><span class="p">]:</span> <span class="mi">4</span>
</span></span></code></pre></div><p>We can see that it matches what we saw earlier with the all() method.</p>
<div class="gblog-post__anchorwrap">
    <h5 id="filter-method">
        filter() method
        <a data-clipboard-text="https://iserghini.github.io/posts/netbox-automation-using-pynetbox/#filter-method" class="gblog-post__anchor clip flex align-center" aria-label="Anchor filter() method" href="#filter-method">
            <svg class="gblog-icon gblog_link"><use xlink:href="#gblog_link"></use></svg>
        </a>
    </h5>
</div>
<p>This method is quite useful, especially when we have a large dataset. The best way to use it is by filtering based on actual fields of the endpoint you&rsquo;re querying.</p>
<p>For example, for manufacturers, we have the &ldquo;Name&rdquo; field:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-py" data-lang="py"><span class="line"><span class="cl"><span class="n">In</span> <span class="p">[</span><span class="mi">30</span><span class="p">]:</span> <span class="n">filter_manufacturer</span> <span class="o">=</span> <span class="n">nb</span><span class="o">.</span><span class="n">dcim</span><span class="o">.</span><span class="n">manufacturers</span><span class="o">.</span><span class="n">filter</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s1">&#39;Cisco&#39;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="n">In</span> <span class="p">[</span><span class="mi">31</span><span class="p">]:</span> <span class="k">for</span> <span class="n">manufacturer</span> <span class="ow">in</span> <span class="n">filter_manufacturer</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">    <span class="o">...</span><span class="p">:</span>     <span class="nb">print</span><span class="p">(</span><span class="n">manufacturer</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="o">...</span><span class="p">:</span> 
</span></span><span class="line"><span class="cl"><span class="n">Cisco</span>
</span></span></code></pre></div><p>If we try we a vendor that doesn&rsquo;t exist:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="line"><span class="cl"><span class="n">In</span> <span class="p">[</span><span class="mi">49</span><span class="p">]:</span> <span class="n">filter_manufacturer</span> <span class="o">=</span> <span class="n">nb</span><span class="o">.</span><span class="n">dcim</span><span class="o">.</span><span class="n">manufacturers</span><span class="o">.</span><span class="n">filter</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s1">&#39;Nvidia&#39;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="n">In</span> <span class="p">[</span><span class="mi">50</span><span class="p">]:</span> <span class="k">for</span> <span class="n">manufacturer</span> <span class="ow">in</span> <span class="n">filter_manufacturer</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">    <span class="o">...</span><span class="p">:</span>     <span class="nb">print</span><span class="p">(</span><span class="n">manufacturer</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="o">...</span><span class="p">:</span> 
</span></span><span class="line"><span class="cl"><span class="n">In</span> <span class="p">[</span><span class="mi">51</span><span class="p">]:</span> 
</span></span></code></pre></div><p>It doesn&rsquo;t return anything as there is none.</p>
<p>Another example, let&rsquo;s say we want to know if we have in the device model &ldquo;DCS-7010T-48&rdquo;:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="line"><span class="cl"><span class="n">In</span> <span class="p">[</span><span class="mi">54</span><span class="p">]:</span> <span class="n">filter_device_type</span> <span class="o">=</span> <span class="n">nb</span><span class="o">.</span><span class="n">dcim</span><span class="o">.</span><span class="n">device_types</span><span class="o">.</span><span class="n">filter</span><span class="p">(</span><span class="n">model</span><span class="o">=</span><span class="s1">&#39;DCS-7010T-48&#39;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="n">In</span> <span class="p">[</span><span class="mi">55</span><span class="p">]:</span> <span class="k">for</span> <span class="n">device</span> <span class="ow">in</span> <span class="n">filter_device_type</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">    <span class="o">...</span><span class="p">:</span>     <span class="nb">print</span><span class="p">(</span><span class="n">device</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="o">...</span><span class="p">:</span> 
</span></span><span class="line"><span class="cl"><span class="n">DCS</span><span class="o">-</span><span class="mi">7010</span><span class="n">T</span><span class="o">-</span><span class="mi">48</span>
</span></span></code></pre></div><p>You may wonder&hellip;the &ldquo;device_types&rdquo; endpoint is fine, you found it in the Netbox API docs but how about the filtering variable &ldquo;model&rdquo;?</p>
<p>I went to the Netbox GUI, click edit on the device and found it there. Anything supported by the endpoint can be used as a filtering variable.</p>



  <div class="flex justify-center">
    <figure
      class="gblog-post__figure"
    >
      <a class="gblog-markdown__link--raw" href="https://iserghini.github.io/posts/netbox-automation-using-pynetbox/images/model.png">
        <picture>
          <source
              srcset="https://iserghini.github.io/posts/netbox-automation-using-pynetbox/images/model_hue2f2584f05cc7854011aceb513579556_201621_600x0_resize_box_3.png 600w, https://iserghini.github.io/posts/netbox-automation-using-pynetbox/images/model_hue2f2584f05cc7854011aceb513579556_201621_1200x0_resize_box_3.png 1200w" sizes="100vw"
          />
          <img
            src="https://iserghini.github.io/posts/netbox-automation-using-pynetbox/images/model_hue2f2584f05cc7854011aceb513579556_201621_1800x0_resize_box_3.png"
            alt=""
          />
        </picture>
      </a>
    </figure>
  </div>

<p>You can also find it in the Netbox API docs:</p>



  <div class="flex justify-center">
    <figure
      class="gblog-post__figure"
    >
      <a class="gblog-markdown__link--raw" href="https://iserghini.github.io/posts/netbox-automation-using-pynetbox/images/model_api.png">
        <picture>
          <source
              srcset="https://iserghini.github.io/posts/netbox-automation-using-pynetbox/images/model_api_hua4a695da4325de0802cb2220c7c6eaf0_136673_600x0_resize_box_3.png 600w, https://iserghini.github.io/posts/netbox-automation-using-pynetbox/images/model_api_hua4a695da4325de0802cb2220c7c6eaf0_136673_1200x0_resize_box_3.png 1200w" sizes="100vw"
          />
          <img
            src="https://iserghini.github.io/posts/netbox-automation-using-pynetbox/images/model_api_hua4a695da4325de0802cb2220c7c6eaf0_136673_1800x0_resize_box_3.png"
            alt=""
          />
        </picture>
      </a>
    </figure>
  </div>






<blockquote class="gblog-hint warning">
  <div class="gblog-hint__title flex align-center"><i class="fa warning" title="Warning"></i></div>
  <div class="gblog-hint__text">Any endpoint that uses hyphens, when converted to Pynetbox syntax, must be converted to underscores, as per above (device_types as opposed to device-types). Otherwise, you&rsquo;ll get a nice &ldquo;NameError&rdquo; Python exception.</div>
</blockquote>

<div class="gblog-post__anchorwrap">
    <h5 id="get-method">
        get() method
        <a data-clipboard-text="https://iserghini.github.io/posts/netbox-automation-using-pynetbox/#get-method" class="gblog-post__anchor clip flex align-center" aria-label="Anchor get() method" href="#get-method">
            <svg class="gblog-icon gblog_link"><use xlink:href="#gblog_link"></use></svg>
        </a>
    </h5>
</div>
<p>Finally, the last method in this section, and probably the most important as it&rsquo;s heavily relied upon by the &ldquo;working with data&rdquo; methods.</p>
<p>The difference between all(), filter(), and get() is that all() and filter() provide shallow information about what&rsquo;s queried i.e. just the names but get() provides a lot of information.</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="line"><span class="cl"><span class="n">In</span> <span class="p">[</span><span class="mi">38</span><span class="p">]:</span> <span class="n">nb</span><span class="o">.</span><span class="n">dcim</span><span class="o">.</span><span class="n">manufacturers</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s1">&#39;Cisco&#39;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="n">Out</span><span class="p">[</span><span class="mi">38</span><span class="p">]:</span> <span class="n">Cisco</span>
</span></span></code></pre></div><p>At face value, it seems like it provides just the names similarly to all() and filter() but if we cast the object as a dictionary we can see that there is a lot more to it:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="line"><span class="cl"><span class="n">In</span> <span class="p">[</span><span class="mi">39</span><span class="p">]:</span> <span class="nb">dict</span><span class="p">(</span><span class="n">nb</span><span class="o">.</span><span class="n">dcim</span><span class="o">.</span><span class="n">manufacturers</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s1">&#39;Cisco&#39;</span><span class="p">))</span>
</span></span><span class="line"><span class="cl"><span class="n">Out</span><span class="p">[</span><span class="mi">39</span><span class="p">]:</span> 
</span></span><span class="line"><span class="cl"><span class="p">{</span><span class="s1">&#39;id&#39;</span><span class="p">:</span> <span class="mi">2</span><span class="p">,</span>
</span></span><span class="line"><span class="cl"> <span class="s1">&#39;url&#39;</span><span class="p">:</span> <span class="s1">&#39;http://localhost:8000/api/dcim/manufacturers/2/&#39;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl"> <span class="s1">&#39;display&#39;</span><span class="p">:</span> <span class="s1">&#39;Cisco&#39;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl"> <span class="s1">&#39;name&#39;</span><span class="p">:</span> <span class="s1">&#39;Cisco&#39;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl"> <span class="s1">&#39;slug&#39;</span><span class="p">:</span> <span class="s1">&#39;cisco&#39;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl"> <span class="s1">&#39;description&#39;</span><span class="p">:</span> <span class="s1">&#39;&#39;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl"> <span class="s1">&#39;tags&#39;</span><span class="p">:</span> <span class="p">[],</span>
</span></span><span class="line"><span class="cl"> <span class="s1">&#39;custom_fields&#39;</span><span class="p">:</span> <span class="p">{},</span>
</span></span><span class="line"><span class="cl"> <span class="s1">&#39;created&#39;</span><span class="p">:</span> <span class="s1">&#39;2022-08-03T06:52:44.486022Z&#39;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl"> <span class="s1">&#39;last_updated&#39;</span><span class="p">:</span> <span class="s1">&#39;2022-08-03T06:52:44.486036Z&#39;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl"> <span class="s1">&#39;devicetype_count&#39;</span><span class="p">:</span> <span class="mi">523</span><span class="p">,</span>
</span></span><span class="line"><span class="cl"> <span class="s1">&#39;inventoryitem_count&#39;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
</span></span><span class="line"><span class="cl"> <span class="s1">&#39;platform_count&#39;</span><span class="p">:</span> <span class="mi">0</span><span class="p">}</span>
</span></span></code></pre></div><div class="gblog-post__anchorwrap">
    <h4 id="working-with-the-data">
        Working with the data
        <a data-clipboard-text="https://iserghini.github.io/posts/netbox-automation-using-pynetbox/#working-with-the-data" class="gblog-post__anchor clip flex align-center" aria-label="Anchor Working with the data" href="#working-with-the-data">
            <svg class="gblog-icon gblog_link"><use xlink:href="#gblog_link"></use></svg>
        </a>
    </h4>
</div>
<p>In this section, we&rsquo;re going to discuss the methods that allow us to do more than just querying the data - keep in mind that these methods require a &lsquo;write enabled&rsquo; token.</p>
<div class="gblog-post__anchorwrap">
    <h5 id="create-method">
        create() method
        <a data-clipboard-text="https://iserghini.github.io/posts/netbox-automation-using-pynetbox/#create-method" class="gblog-post__anchor clip flex align-center" aria-label="Anchor create() method" href="#create-method">
            <svg class="gblog-icon gblog_link"><use xlink:href="#gblog_link"></use></svg>
        </a>
    </h5>
</div>
<p>In this example, we&rsquo;re going to create a new prefix. As usual, we need to find within the Netbox API docs the required app and endpoint for this  - the method, as we know already, is going to be create().</p>
<p>We also need to know the required fields to create a new prefix - again Netbox API docs come to the rescue:</p>



  <div class="flex justify-center">
    <figure
      class="gblog-post__figure"
    >
      <a class="gblog-markdown__link--raw" href="https://iserghini.github.io/posts/netbox-automation-using-pynetbox/images/create_prefix.png">
        <picture>
          <source
              srcset="https://iserghini.github.io/posts/netbox-automation-using-pynetbox/images/create_prefix_hu5da9dbca571e253fb0d0355c0a68ee55_165456_600x0_resize_box_3.png 600w, https://iserghini.github.io/posts/netbox-automation-using-pynetbox/images/create_prefix_hu5da9dbca571e253fb0d0355c0a68ee55_165456_1200x0_resize_box_3.png 1200w" sizes="100vw"
          />
          <img
            src="https://iserghini.github.io/posts/netbox-automation-using-pynetbox/images/create_prefix_hu5da9dbca571e253fb0d0355c0a68ee55_165456_1800x0_resize_box_3.png"
            alt=""
          />
        </picture>
      </a>
    </figure>
  </div>

<p>As we can see, the only &ldquo;must&rdquo; is the actual prefix, so let&rsquo;s create it:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="line"><span class="cl"><span class="n">In</span> <span class="p">[</span><span class="mi">74</span><span class="p">]:</span> <span class="n">create_prefix</span> <span class="o">=</span> <span class="n">nb</span><span class="o">.</span><span class="n">ipam</span><span class="o">.</span><span class="n">prefixes</span><span class="o">.</span><span class="n">create</span><span class="p">(</span><span class="n">prefix</span><span class="o">=</span><span class="s1">&#39;10.0.0.0/8&#39;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="n">In</span> <span class="p">[</span><span class="mi">75</span><span class="p">]:</span> <span class="nb">dict</span><span class="p">(</span><span class="n">create_prefix</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="n">Out</span><span class="p">[</span><span class="mi">75</span><span class="p">]:</span> 
</span></span><span class="line"><span class="cl"><span class="p">{</span><span class="s1">&#39;id&#39;</span><span class="p">:</span> <span class="mi">2</span><span class="p">,</span>
</span></span><span class="line"><span class="cl"> <span class="s1">&#39;url&#39;</span><span class="p">:</span> <span class="s1">&#39;http://localhost:8000/api/ipam/prefixes/2/&#39;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl"> <span class="s1">&#39;display&#39;</span><span class="p">:</span> <span class="s1">&#39;10.0.0.0/8&#39;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl"> <span class="s1">&#39;family&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;value&#39;</span><span class="p">:</span> <span class="mi">4</span><span class="p">,</span> <span class="s1">&#39;label&#39;</span><span class="p">:</span> <span class="s1">&#39;IPv4&#39;</span><span class="p">},</span>
</span></span><span class="line"><span class="cl"> <span class="s1">&#39;prefix&#39;</span><span class="p">:</span> <span class="s1">&#39;10.0.0.0/8&#39;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl"> <span class="s1">&#39;site&#39;</span><span class="p">:</span> <span class="kc">None</span><span class="p">,</span>
</span></span><span class="line"><span class="cl"> <span class="s1">&#39;vrf&#39;</span><span class="p">:</span> <span class="kc">None</span><span class="p">,</span>
</span></span><span class="line"><span class="cl"> <span class="s1">&#39;tenant&#39;</span><span class="p">:</span> <span class="kc">None</span><span class="p">,</span>
</span></span><span class="line"><span class="cl"> <span class="s1">&#39;vlan&#39;</span><span class="p">:</span> <span class="kc">None</span><span class="p">,</span>
</span></span><span class="line"><span class="cl"> <span class="s1">&#39;status&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;value&#39;</span><span class="p">:</span> <span class="s1">&#39;active&#39;</span><span class="p">,</span> <span class="s1">&#39;label&#39;</span><span class="p">:</span> <span class="s1">&#39;Active&#39;</span><span class="p">},</span>
</span></span><span class="line"><span class="cl"> <span class="s1">&#39;role&#39;</span><span class="p">:</span> <span class="kc">None</span><span class="p">,</span>
</span></span><span class="line"><span class="cl"> <span class="s1">&#39;is_pool&#39;</span><span class="p">:</span> <span class="kc">False</span><span class="p">,</span>
</span></span><span class="line"><span class="cl"> <span class="s1">&#39;mark_utilized&#39;</span><span class="p">:</span> <span class="kc">False</span><span class="p">,</span>
</span></span><span class="line"><span class="cl"> <span class="s1">&#39;description&#39;</span><span class="p">:</span> <span class="s1">&#39;&#39;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl"> <span class="s1">&#39;tags&#39;</span><span class="p">:</span> <span class="p">[],</span>
</span></span><span class="line"><span class="cl"> <span class="s1">&#39;custom_fields&#39;</span><span class="p">:</span> <span class="p">{},</span>
</span></span><span class="line"><span class="cl"> <span class="s1">&#39;created&#39;</span><span class="p">:</span> <span class="s1">&#39;2022-08-03T21:57:20.209391Z&#39;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl"> <span class="s1">&#39;last_updated&#39;</span><span class="p">:</span> <span class="s1">&#39;2022-08-03T21:57:20.209406Z&#39;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl"> <span class="s1">&#39;children&#39;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
</span></span><span class="line"><span class="cl"> <span class="s1">&#39;_depth&#39;</span><span class="p">:</span> <span class="mi">0</span><span class="p">}</span>
</span></span></code></pre></div><p>If you&rsquo;ve noticed, I saved the output of the object creation into a variable, and that&rsquo;s because the output is not a simple &lsquo;OK&rsquo; but an object containing all the information pertaining to the prefix as it was created: most of the stuff is set to &lsquo;None&rsquo; due to us not configuring it previously.</p>
<div class="gblog-post__anchorwrap">
    <h5 id="save-method">
        save() method
        <a data-clipboard-text="https://iserghini.github.io/posts/netbox-automation-using-pynetbox/#save-method" class="gblog-post__anchor clip flex align-center" aria-label="Anchor save() method" href="#save-method">
            <svg class="gblog-icon gblog_link"><use xlink:href="#gblog_link"></use></svg>
        </a>
    </h5>
</div>
<p>Let&rsquo;s leverage the &ldquo;create_prefix&rdquo; variable from the previous method and update the prefix with some extra info - this was the reason for saving it into a variable. Keep in mind that the values we can use are always determined by the API docs, for instance for the VLAN, it asks for an integer (unique identifier you can find using get), so you can&rsquo;t just use the VLAN name. Let&rsquo;s try to add a VLAN to this prefix.</p>
<ol>
<li>Find the unique identifier for this VLAN, as we can see in the dictionary below, we have &lsquo;id&rsquo; and &lsquo;vid&rsquo;, we&rsquo;re after the former:</li>
</ol>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="line"><span class="cl"><span class="n">In</span> <span class="p">[</span><span class="mi">90</span><span class="p">]:</span> <span class="nb">dict</span><span class="p">(</span><span class="n">nb</span><span class="o">.</span><span class="n">ipam</span><span class="o">.</span><span class="n">vlans</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s1">&#39;MGMT_VLAN&#39;</span><span class="p">))</span>
</span></span><span class="line"><span class="cl"><span class="n">Out</span><span class="p">[</span><span class="mi">90</span><span class="p">]:</span> 
</span></span><span class="line"><span class="cl"><span class="p">{</span><span class="s1">&#39;id&#39;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
</span></span><span class="line"><span class="cl"> <span class="s1">&#39;url&#39;</span><span class="p">:</span> <span class="s1">&#39;http://localhost:8000/api/ipam/vlans/1/&#39;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl"> <span class="s1">&#39;display&#39;</span><span class="p">:</span> <span class="s1">&#39;MGMT_VLAN (100)&#39;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl"> <span class="s1">&#39;site&#39;</span><span class="p">:</span> <span class="kc">None</span><span class="p">,</span>
</span></span><span class="line"><span class="cl"> <span class="s1">&#39;group&#39;</span><span class="p">:</span> <span class="kc">None</span><span class="p">,</span>
</span></span><span class="line"><span class="cl"> <span class="s1">&#39;vid&#39;</span><span class="p">:</span> <span class="mi">100</span><span class="p">,</span>
</span></span><span class="line"><span class="cl"> <span class="s1">&#39;name&#39;</span><span class="p">:</span> <span class="s1">&#39;MGMT_VLAN&#39;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl"> <span class="s1">&#39;tenant&#39;</span><span class="p">:</span> <span class="kc">None</span><span class="p">,</span>
</span></span><span class="line"><span class="cl"> <span class="s1">&#39;status&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;value&#39;</span><span class="p">:</span> <span class="s1">&#39;active&#39;</span><span class="p">,</span> <span class="s1">&#39;label&#39;</span><span class="p">:</span> <span class="s1">&#39;Active&#39;</span><span class="p">},</span>
</span></span><span class="line"><span class="cl"> <span class="s1">&#39;role&#39;</span><span class="p">:</span> <span class="kc">None</span><span class="p">,</span>
</span></span><span class="line"><span class="cl"> <span class="s1">&#39;description&#39;</span><span class="p">:</span> <span class="s1">&#39;&#39;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl"> <span class="s1">&#39;tags&#39;</span><span class="p">:</span> <span class="p">[],</span>
</span></span><span class="line"><span class="cl"> <span class="s1">&#39;custom_fields&#39;</span><span class="p">:</span> <span class="p">{},</span>
</span></span><span class="line"><span class="cl"> <span class="s1">&#39;created&#39;</span><span class="p">:</span> <span class="s1">&#39;2022-08-03T22:09:27.721598Z&#39;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl"> <span class="s1">&#39;last_updated&#39;</span><span class="p">:</span> <span class="s1">&#39;2022-08-03T22:09:27.722169Z&#39;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl"> <span class="s1">&#39;prefix_count&#39;</span><span class="p">:</span> <span class="mi">0</span><span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="n">In</span> <span class="p">[</span><span class="mi">91</span><span class="p">]:</span> <span class="n">nb</span><span class="o">.</span><span class="n">ipam</span><span class="o">.</span><span class="n">vlans</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s1">&#39;MGMT_VLAN&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">id</span>
</span></span><span class="line"><span class="cl"><span class="n">Out</span><span class="p">[</span><span class="mi">91</span><span class="p">]:</span> <span class="mi">1</span>
</span></span></code></pre></div><ol start="2">
<li>Let&rsquo;s add it to our prefix and check the status of the prefix object:</li>
</ol>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="line"><span class="cl"><span class="n">In</span> <span class="p">[</span><span class="mi">92</span><span class="p">]:</span> <span class="n">create_prefix</span><span class="o">.</span><span class="n">vlan</span> <span class="o">=</span> <span class="mi">1</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="n">In</span> <span class="p">[</span><span class="mi">93</span><span class="p">]:</span> <span class="nb">dict</span><span class="p">(</span><span class="n">create_prefix</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="n">Out</span><span class="p">[</span><span class="mi">93</span><span class="p">]:</span> 
</span></span><span class="line"><span class="cl"><span class="p">{</span><span class="s1">&#39;id&#39;</span><span class="p">:</span> <span class="mi">2</span><span class="p">,</span>
</span></span><span class="line"><span class="cl"> <span class="s1">&#39;url&#39;</span><span class="p">:</span> <span class="s1">&#39;http://localhost:8000/api/ipam/prefixes/2/&#39;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl"> <span class="s1">&#39;display&#39;</span><span class="p">:</span> <span class="s1">&#39;10.0.0.0/8&#39;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl"> <span class="s1">&#39;family&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;value&#39;</span><span class="p">:</span> <span class="mi">4</span><span class="p">,</span> <span class="s1">&#39;label&#39;</span><span class="p">:</span> <span class="s1">&#39;IPv4&#39;</span><span class="p">},</span>
</span></span><span class="line"><span class="cl"> <span class="s1">&#39;prefix&#39;</span><span class="p">:</span> <span class="s1">&#39;10.0.0.0/8&#39;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl"> <span class="s1">&#39;site&#39;</span><span class="p">:</span> <span class="kc">None</span><span class="p">,</span>
</span></span><span class="line"><span class="cl"> <span class="s1">&#39;vrf&#39;</span><span class="p">:</span> <span class="kc">None</span><span class="p">,</span>
</span></span><span class="line"><span class="cl"> <span class="s1">&#39;tenant&#39;</span><span class="p">:</span> <span class="kc">None</span><span class="p">,</span>
</span></span><span class="line"><span class="cl"> <span class="s1">&#39;vlan&#39;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
</span></span><span class="line"><span class="cl"> <span class="s1">&#39;status&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;value&#39;</span><span class="p">:</span> <span class="s1">&#39;active&#39;</span><span class="p">,</span> <span class="s1">&#39;label&#39;</span><span class="p">:</span> <span class="s1">&#39;Active&#39;</span><span class="p">},</span>
</span></span><span class="line"><span class="cl"> <span class="s1">&#39;role&#39;</span><span class="p">:</span> <span class="kc">None</span><span class="p">,</span>
</span></span><span class="line"><span class="cl"> <span class="s1">&#39;is_pool&#39;</span><span class="p">:</span> <span class="kc">False</span><span class="p">,</span>
</span></span><span class="line"><span class="cl"> <span class="s1">&#39;mark_utilized&#39;</span><span class="p">:</span> <span class="kc">False</span><span class="p">,</span>
</span></span><span class="line"><span class="cl"> <span class="s1">&#39;description&#39;</span><span class="p">:</span> <span class="s1">&#39;&#39;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl"> <span class="s1">&#39;tags&#39;</span><span class="p">:</span> <span class="p">[],</span>
</span></span><span class="line"><span class="cl"> <span class="s1">&#39;custom_fields&#39;</span><span class="p">:</span> <span class="p">{},</span>
</span></span><span class="line"><span class="cl"> <span class="s1">&#39;created&#39;</span><span class="p">:</span> <span class="s1">&#39;2022-08-03T21:57:20.209391Z&#39;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl"> <span class="s1">&#39;last_updated&#39;</span><span class="p">:</span> <span class="s1">&#39;2022-08-03T21:57:20.209406Z&#39;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl"> <span class="s1">&#39;children&#39;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
</span></span><span class="line"><span class="cl"> <span class="s1">&#39;_depth&#39;</span><span class="p">:</span> <span class="mi">0</span><span class="p">}</span>
</span></span></code></pre></div><p>We&rsquo;re not done just yet as the changes to the prefix object have been made locally, we need to push them to Netbox. Coincidentally, this is exactly what the save() method does.</p>
<p>Time to push the changes then:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="line"><span class="cl"><span class="n">In</span> <span class="p">[</span><span class="mi">94</span><span class="p">]:</span> <span class="n">create_prefix</span><span class="o">.</span><span class="n">save</span><span class="p">()</span>
</span></span><span class="line"><span class="cl"><span class="n">Out</span><span class="p">[</span><span class="mi">94</span><span class="p">]:</span> <span class="kc">True</span>
</span></span></code></pre></div><p>&lsquo;True&rsquo; means that the changes were made correctly, let&rsquo;s verify so using get() - by now you&rsquo;ve probably grasped how important get() is.</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="line"><span class="cl"><span class="n">In</span> <span class="p">[</span><span class="mi">96</span><span class="p">]:</span> <span class="nb">dict</span><span class="p">(</span><span class="n">nb</span><span class="o">.</span><span class="n">ipam</span><span class="o">.</span><span class="n">prefixes</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">prefix</span><span class="o">=</span><span class="s1">&#39;10.0.0.0/8&#39;</span><span class="p">))</span>
</span></span><span class="line"><span class="cl"><span class="n">Out</span><span class="p">[</span><span class="mi">96</span><span class="p">]:</span> 
</span></span><span class="line"><span class="cl"><span class="p">{</span><span class="s1">&#39;id&#39;</span><span class="p">:</span> <span class="mi">2</span><span class="p">,</span>
</span></span><span class="line"><span class="cl"> <span class="s1">&#39;url&#39;</span><span class="p">:</span> <span class="s1">&#39;http://localhost:8000/api/ipam/prefixes/2/&#39;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl"> <span class="s1">&#39;display&#39;</span><span class="p">:</span> <span class="s1">&#39;10.0.0.0/8&#39;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl"> <span class="s1">&#39;family&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;value&#39;</span><span class="p">:</span> <span class="mi">4</span><span class="p">,</span> <span class="s1">&#39;label&#39;</span><span class="p">:</span> <span class="s1">&#39;IPv4&#39;</span><span class="p">},</span>
</span></span><span class="line"><span class="cl"> <span class="s1">&#39;prefix&#39;</span><span class="p">:</span> <span class="s1">&#39;10.0.0.0/8&#39;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl"> <span class="s1">&#39;site&#39;</span><span class="p">:</span> <span class="kc">None</span><span class="p">,</span>
</span></span><span class="line"><span class="cl"> <span class="s1">&#39;vrf&#39;</span><span class="p">:</span> <span class="kc">None</span><span class="p">,</span>
</span></span><span class="line"><span class="cl"> <span class="s1">&#39;tenant&#39;</span><span class="p">:</span> <span class="kc">None</span><span class="p">,</span>
</span></span><span class="line"><span class="cl"> <span class="s1">&#39;vlan&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;id&#39;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">  <span class="s1">&#39;url&#39;</span><span class="p">:</span> <span class="s1">&#39;http://localhost:8000/api/ipam/vlans/1/&#39;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">  <span class="s1">&#39;display&#39;</span><span class="p">:</span> <span class="s1">&#39;MGMT_VLAN (100)&#39;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">  <span class="s1">&#39;vid&#39;</span><span class="p">:</span> <span class="mi">100</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">  <span class="s1">&#39;name&#39;</span><span class="p">:</span> <span class="s1">&#39;MGMT_VLAN&#39;</span><span class="p">},</span>
</span></span><span class="line"><span class="cl"> <span class="s1">&#39;status&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;value&#39;</span><span class="p">:</span> <span class="s1">&#39;active&#39;</span><span class="p">,</span> <span class="s1">&#39;label&#39;</span><span class="p">:</span> <span class="s1">&#39;Active&#39;</span><span class="p">},</span>
</span></span><span class="line"><span class="cl"> <span class="s1">&#39;role&#39;</span><span class="p">:</span> <span class="kc">None</span><span class="p">,</span>
</span></span><span class="line"><span class="cl"> <span class="s1">&#39;is_pool&#39;</span><span class="p">:</span> <span class="kc">False</span><span class="p">,</span>
</span></span><span class="line"><span class="cl"> <span class="s1">&#39;mark_utilized&#39;</span><span class="p">:</span> <span class="kc">False</span><span class="p">,</span>
</span></span><span class="line"><span class="cl"> <span class="s1">&#39;description&#39;</span><span class="p">:</span> <span class="s1">&#39;&#39;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl"> <span class="s1">&#39;tags&#39;</span><span class="p">:</span> <span class="p">[],</span>
</span></span><span class="line"><span class="cl"> <span class="s1">&#39;custom_fields&#39;</span><span class="p">:</span> <span class="p">{},</span>
</span></span><span class="line"><span class="cl"> <span class="s1">&#39;created&#39;</span><span class="p">:</span> <span class="s1">&#39;2022-08-03T21:57:20.209391Z&#39;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl"> <span class="s1">&#39;last_updated&#39;</span><span class="p">:</span> <span class="s1">&#39;2022-08-03T22:22:48.975930Z&#39;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl"> <span class="s1">&#39;children&#39;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
</span></span><span class="line"><span class="cl"> <span class="s1">&#39;_depth&#39;</span><span class="p">:</span> <span class="mi">0</span><span class="p">}</span>
</span></span></code></pre></div><p>Nice, looks like it got configured correctly after all! Let&rsquo;s update a couple more things just for fun:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="line"><span class="cl"><span class="n">In</span> <span class="p">[</span><span class="mi">97</span><span class="p">]:</span> <span class="n">create_prefix</span><span class="o">.</span><span class="n">description</span> <span class="o">=</span> <span class="s1">&#39;Management Network Prefix AGG&#39;</span>
</span></span><span class="line"><span class="cl"><span class="n">In</span> <span class="p">[</span><span class="mi">98</span><span class="p">]:</span> <span class="n">create_prefix</span><span class="o">.</span><span class="n">site</span> <span class="o">=</span> <span class="mi">1</span>
</span></span><span class="line"><span class="cl"><span class="n">In</span> <span class="p">[</span><span class="mi">99</span><span class="p">]:</span> <span class="nb">dict</span><span class="p">(</span><span class="n">create_prefix</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="n">Out</span><span class="p">[</span><span class="mi">99</span><span class="p">]:</span> 
</span></span><span class="line"><span class="cl"><span class="p">{</span><span class="s1">&#39;id&#39;</span><span class="p">:</span> <span class="mi">2</span><span class="p">,</span>
</span></span><span class="line"><span class="cl"> <span class="s1">&#39;url&#39;</span><span class="p">:</span> <span class="s1">&#39;http://localhost:8000/api/ipam/prefixes/2/&#39;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl"> <span class="s1">&#39;display&#39;</span><span class="p">:</span> <span class="s1">&#39;10.0.0.0/8&#39;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl"> <span class="s1">&#39;family&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;value&#39;</span><span class="p">:</span> <span class="mi">4</span><span class="p">,</span> <span class="s1">&#39;label&#39;</span><span class="p">:</span> <span class="s1">&#39;IPv4&#39;</span><span class="p">},</span>
</span></span><span class="line"><span class="cl"> <span class="s1">&#39;prefix&#39;</span><span class="p">:</span> <span class="s1">&#39;10.0.0.0/8&#39;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl"> <span class="s1">&#39;site&#39;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
</span></span><span class="line"><span class="cl"> <span class="s1">&#39;vrf&#39;</span><span class="p">:</span> <span class="kc">None</span><span class="p">,</span>
</span></span><span class="line"><span class="cl"> <span class="s1">&#39;tenant&#39;</span><span class="p">:</span> <span class="kc">None</span><span class="p">,</span>
</span></span><span class="line"><span class="cl"> <span class="s1">&#39;vlan&#39;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
</span></span><span class="line"><span class="cl"> <span class="s1">&#39;status&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;value&#39;</span><span class="p">:</span> <span class="s1">&#39;active&#39;</span><span class="p">,</span> <span class="s1">&#39;label&#39;</span><span class="p">:</span> <span class="s1">&#39;Active&#39;</span><span class="p">},</span>
</span></span><span class="line"><span class="cl"> <span class="s1">&#39;role&#39;</span><span class="p">:</span> <span class="kc">None</span><span class="p">,</span>
</span></span><span class="line"><span class="cl"> <span class="s1">&#39;is_pool&#39;</span><span class="p">:</span> <span class="kc">False</span><span class="p">,</span>
</span></span><span class="line"><span class="cl"> <span class="s1">&#39;mark_utilized&#39;</span><span class="p">:</span> <span class="kc">False</span><span class="p">,</span>
</span></span><span class="line"><span class="cl"> <span class="s1">&#39;description&#39;</span><span class="p">:</span> <span class="s1">&#39;Management Network Prefix AGG&#39;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl"> <span class="s1">&#39;tags&#39;</span><span class="p">:</span> <span class="p">[],</span>
</span></span><span class="line"><span class="cl"> <span class="s1">&#39;custom_fields&#39;</span><span class="p">:</span> <span class="p">{},</span>
</span></span><span class="line"><span class="cl"> <span class="s1">&#39;created&#39;</span><span class="p">:</span> <span class="s1">&#39;2022-08-03T21:57:20.209391Z&#39;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl"> <span class="s1">&#39;last_updated&#39;</span><span class="p">:</span> <span class="s1">&#39;2022-08-03T21:57:20.209406Z&#39;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl"> <span class="s1">&#39;children&#39;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
</span></span><span class="line"><span class="cl"> <span class="s1">&#39;_depth&#39;</span><span class="p">:</span> <span class="mi">0</span><span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="n">In</span> <span class="p">[</span><span class="mi">100</span><span class="p">]:</span> <span class="n">create_prefix</span><span class="o">.</span><span class="n">save</span><span class="p">()</span>
</span></span><span class="line"><span class="cl"><span class="n">Out</span><span class="p">[</span><span class="mi">100</span><span class="p">]:</span> <span class="kc">True</span>
</span></span></code></pre></div><p>One more check:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="line"><span class="cl"><span class="n">In</span> <span class="p">[</span><span class="mi">101</span><span class="p">]:</span> <span class="nb">dict</span><span class="p">(</span><span class="n">nb</span><span class="o">.</span><span class="n">ipam</span><span class="o">.</span><span class="n">prefixes</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">prefix</span><span class="o">=</span><span class="s1">&#39;10.0.0.0/8&#39;</span><span class="p">))</span>
</span></span><span class="line"><span class="cl"><span class="n">Out</span><span class="p">[</span><span class="mi">101</span><span class="p">]:</span> 
</span></span><span class="line"><span class="cl"><span class="p">{</span><span class="s1">&#39;id&#39;</span><span class="p">:</span> <span class="mi">2</span><span class="p">,</span>
</span></span><span class="line"><span class="cl"> <span class="s1">&#39;url&#39;</span><span class="p">:</span> <span class="s1">&#39;http://localhost:8000/api/ipam/prefixes/2/&#39;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl"> <span class="s1">&#39;display&#39;</span><span class="p">:</span> <span class="s1">&#39;10.0.0.0/8&#39;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl"> <span class="s1">&#39;family&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;value&#39;</span><span class="p">:</span> <span class="mi">4</span><span class="p">,</span> <span class="s1">&#39;label&#39;</span><span class="p">:</span> <span class="s1">&#39;IPv4&#39;</span><span class="p">},</span>
</span></span><span class="line"><span class="cl"> <span class="s1">&#39;prefix&#39;</span><span class="p">:</span> <span class="s1">&#39;10.0.0.0/8&#39;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl"> <span class="s1">&#39;site&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;id&#39;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">  <span class="s1">&#39;url&#39;</span><span class="p">:</span> <span class="s1">&#39;http://localhost:8000/api/dcim/sites/1/&#39;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">  <span class="s1">&#39;display&#39;</span><span class="p">:</span> <span class="s1">&#39;US East&#39;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">  <span class="s1">&#39;name&#39;</span><span class="p">:</span> <span class="s1">&#39;US East&#39;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">  <span class="s1">&#39;slug&#39;</span><span class="p">:</span> <span class="s1">&#39;us-east&#39;</span><span class="p">},</span>
</span></span><span class="line"><span class="cl"> <span class="s1">&#39;vrf&#39;</span><span class="p">:</span> <span class="kc">None</span><span class="p">,</span>
</span></span><span class="line"><span class="cl"> <span class="s1">&#39;tenant&#39;</span><span class="p">:</span> <span class="kc">None</span><span class="p">,</span>
</span></span><span class="line"><span class="cl"> <span class="s1">&#39;vlan&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;id&#39;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">  <span class="s1">&#39;url&#39;</span><span class="p">:</span> <span class="s1">&#39;http://localhost:8000/api/ipam/vlans/1/&#39;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">  <span class="s1">&#39;display&#39;</span><span class="p">:</span> <span class="s1">&#39;MGMT_VLAN (100)&#39;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">  <span class="s1">&#39;vid&#39;</span><span class="p">:</span> <span class="mi">100</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">  <span class="s1">&#39;name&#39;</span><span class="p">:</span> <span class="s1">&#39;MGMT_VLAN&#39;</span><span class="p">},</span>
</span></span><span class="line"><span class="cl"> <span class="s1">&#39;status&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;value&#39;</span><span class="p">:</span> <span class="s1">&#39;active&#39;</span><span class="p">,</span> <span class="s1">&#39;label&#39;</span><span class="p">:</span> <span class="s1">&#39;Active&#39;</span><span class="p">},</span>
</span></span><span class="line"><span class="cl"> <span class="s1">&#39;role&#39;</span><span class="p">:</span> <span class="kc">None</span><span class="p">,</span>
</span></span><span class="line"><span class="cl"> <span class="s1">&#39;is_pool&#39;</span><span class="p">:</span> <span class="kc">False</span><span class="p">,</span>
</span></span><span class="line"><span class="cl"> <span class="s1">&#39;mark_utilized&#39;</span><span class="p">:</span> <span class="kc">False</span><span class="p">,</span>
</span></span><span class="line"><span class="cl"> <span class="s1">&#39;description&#39;</span><span class="p">:</span> <span class="s1">&#39;Management Network Prefix AGG&#39;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl"> <span class="s1">&#39;tags&#39;</span><span class="p">:</span> <span class="p">[],</span>
</span></span><span class="line"><span class="cl"> <span class="s1">&#39;custom_fields&#39;</span><span class="p">:</span> <span class="p">{},</span>
</span></span><span class="line"><span class="cl"> <span class="s1">&#39;created&#39;</span><span class="p">:</span> <span class="s1">&#39;2022-08-03T21:57:20.209391Z&#39;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl"> <span class="s1">&#39;last_updated&#39;</span><span class="p">:</span> <span class="s1">&#39;2022-08-03T22:26:25.137157Z&#39;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl"> <span class="s1">&#39;children&#39;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
</span></span><span class="line"><span class="cl"> <span class="s1">&#39;_depth&#39;</span><span class="p">:</span> <span class="mi">0</span><span class="p">}</span>
</span></span></code></pre></div><div class="gblog-post__anchorwrap">
    <h5 id="update-method">
        update() method
        <a data-clipboard-text="https://iserghini.github.io/posts/netbox-automation-using-pynetbox/#update-method" class="gblog-post__anchor clip flex align-center" aria-label="Anchor update() method" href="#update-method">
            <svg class="gblog-icon gblog_link"><use xlink:href="#gblog_link"></use></svg>
        </a>
    </h5>
</div>
<p>This method is a combination of all the steps in the previous method in one step. You create a dictionary with the specific things you want to update, call this method, and it directly pushes the changes to Netbox.</p>
<p>Let&rsquo;s take a look at current state of the prefix we want to modify:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="line"><span class="cl"><span class="n">In</span> <span class="p">[</span><span class="mi">122</span><span class="p">]:</span> <span class="n">prefix_2</span> <span class="o">=</span> <span class="n">nb</span><span class="o">.</span><span class="n">ipam</span><span class="o">.</span><span class="n">prefixes</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">prefix</span><span class="o">=</span><span class="s1">&#39;172.16.0.0/16&#39;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="n">In</span> <span class="p">[</span><span class="mi">123</span><span class="p">]:</span> <span class="nb">dict</span><span class="p">(</span><span class="n">prefix_2</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="n">Out</span><span class="p">[</span><span class="mi">123</span><span class="p">]:</span> 
</span></span><span class="line"><span class="cl"><span class="p">{</span><span class="s1">&#39;id&#39;</span><span class="p">:</span> <span class="mi">4</span><span class="p">,</span>
</span></span><span class="line"><span class="cl"> <span class="s1">&#39;url&#39;</span><span class="p">:</span> <span class="s1">&#39;http://localhost:8000/api/ipam/prefixes/4/&#39;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl"> <span class="s1">&#39;display&#39;</span><span class="p">:</span> <span class="s1">&#39;172.16.0.0/16&#39;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl"> <span class="s1">&#39;family&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;value&#39;</span><span class="p">:</span> <span class="mi">4</span><span class="p">,</span> <span class="s1">&#39;label&#39;</span><span class="p">:</span> <span class="s1">&#39;IPv4&#39;</span><span class="p">},</span>
</span></span><span class="line"><span class="cl"> <span class="s1">&#39;prefix&#39;</span><span class="p">:</span> <span class="s1">&#39;172.16.0.0/16&#39;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl"> <span class="s1">&#39;site&#39;</span><span class="p">:</span> <span class="kc">None</span><span class="p">,</span>
</span></span><span class="line"><span class="cl"> <span class="s1">&#39;vrf&#39;</span><span class="p">:</span> <span class="kc">None</span><span class="p">,</span>
</span></span><span class="line"><span class="cl"> <span class="s1">&#39;tenant&#39;</span><span class="p">:</span> <span class="kc">None</span><span class="p">,</span>
</span></span><span class="line"><span class="cl"> <span class="s1">&#39;vlan&#39;</span><span class="p">:</span> <span class="kc">None</span><span class="p">,</span>
</span></span><span class="line"><span class="cl"> <span class="s1">&#39;status&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;value&#39;</span><span class="p">:</span> <span class="s1">&#39;active&#39;</span><span class="p">,</span> <span class="s1">&#39;label&#39;</span><span class="p">:</span> <span class="s1">&#39;Active&#39;</span><span class="p">},</span>
</span></span><span class="line"><span class="cl"> <span class="s1">&#39;role&#39;</span><span class="p">:</span> <span class="kc">None</span><span class="p">,</span>
</span></span><span class="line"><span class="cl"> <span class="s1">&#39;is_pool&#39;</span><span class="p">:</span> <span class="kc">False</span><span class="p">,</span>
</span></span><span class="line"><span class="cl"> <span class="s1">&#39;mark_utilized&#39;</span><span class="p">:</span> <span class="kc">False</span><span class="p">,</span>
</span></span><span class="line"><span class="cl"> <span class="s1">&#39;description&#39;</span><span class="p">:</span> <span class="s1">&#39;&#39;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl"> <span class="s1">&#39;tags&#39;</span><span class="p">:</span> <span class="p">[],</span>
</span></span><span class="line"><span class="cl"> <span class="s1">&#39;custom_fields&#39;</span><span class="p">:</span> <span class="p">{},</span>
</span></span><span class="line"><span class="cl"> <span class="s1">&#39;created&#39;</span><span class="p">:</span> <span class="s1">&#39;2022-08-04T15:20:45.245603Z&#39;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl"> <span class="s1">&#39;last_updated&#39;</span><span class="p">:</span> <span class="s1">&#39;2022-08-04T15:20:45.245692Z&#39;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl"> <span class="s1">&#39;children&#39;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
</span></span><span class="line"><span class="cl"> <span class="s1">&#39;_depth&#39;</span><span class="p">:</span> <span class="mi">0</span><span class="p">}</span>
</span></span></code></pre></div><p>Let&rsquo;s say we want to update its description and site details, so we create a dictionary with that info and pass it as an argument to the update() method:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="line"><span class="cl"><span class="n">In</span> <span class="p">[</span><span class="mi">124</span><span class="p">]:</span> <span class="n">prefix_2_changes</span> <span class="o">=</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">     <span class="o">...</span><span class="p">:</span> <span class="s1">&#39;site&#39;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">     <span class="o">...</span><span class="p">:</span> <span class="s1">&#39;description&#39;</span><span class="p">:</span> <span class="s1">&#39;Office Networks AGG&#39;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">     <span class="o">...</span><span class="p">:</span> <span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="n">In</span> <span class="p">[</span><span class="mi">125</span><span class="p">]:</span> <span class="n">prefix_2</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">prefix_2_changes</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="n">Out</span><span class="p">[</span><span class="mi">125</span><span class="p">]:</span> <span class="kc">True</span>
</span></span></code></pre></div><p>Let&rsquo;s see the changes:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="line"><span class="cl"><span class="n">In</span> <span class="p">[</span><span class="mi">126</span><span class="p">]:</span> <span class="nb">dict</span><span class="p">(</span><span class="n">nb</span><span class="o">.</span><span class="n">ipam</span><span class="o">.</span><span class="n">prefixes</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">prefix</span><span class="o">=</span><span class="s1">&#39;172.16.0.0/16&#39;</span><span class="p">))</span>
</span></span><span class="line"><span class="cl"><span class="n">Out</span><span class="p">[</span><span class="mi">126</span><span class="p">]:</span> 
</span></span><span class="line"><span class="cl"><span class="p">{</span><span class="s1">&#39;id&#39;</span><span class="p">:</span> <span class="mi">4</span><span class="p">,</span>
</span></span><span class="line"><span class="cl"> <span class="s1">&#39;url&#39;</span><span class="p">:</span> <span class="s1">&#39;http://localhost:8000/api/ipam/prefixes/4/&#39;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl"> <span class="s1">&#39;display&#39;</span><span class="p">:</span> <span class="s1">&#39;172.16.0.0/16&#39;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl"> <span class="s1">&#39;family&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;value&#39;</span><span class="p">:</span> <span class="mi">4</span><span class="p">,</span> <span class="s1">&#39;label&#39;</span><span class="p">:</span> <span class="s1">&#39;IPv4&#39;</span><span class="p">},</span>
</span></span><span class="line"><span class="cl"> <span class="s1">&#39;prefix&#39;</span><span class="p">:</span> <span class="s1">&#39;172.16.0.0/16&#39;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl"> <span class="s1">&#39;site&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;id&#39;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">  <span class="s1">&#39;url&#39;</span><span class="p">:</span> <span class="s1">&#39;http://localhost:8000/api/dcim/sites/1/&#39;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">  <span class="s1">&#39;display&#39;</span><span class="p">:</span> <span class="s1">&#39;US East&#39;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">  <span class="s1">&#39;name&#39;</span><span class="p">:</span> <span class="s1">&#39;US East&#39;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">  <span class="s1">&#39;slug&#39;</span><span class="p">:</span> <span class="s1">&#39;us-east&#39;</span><span class="p">},</span>
</span></span><span class="line"><span class="cl"> <span class="s1">&#39;vrf&#39;</span><span class="p">:</span> <span class="kc">None</span><span class="p">,</span>
</span></span><span class="line"><span class="cl"> <span class="s1">&#39;tenant&#39;</span><span class="p">:</span> <span class="kc">None</span><span class="p">,</span>
</span></span><span class="line"><span class="cl"> <span class="s1">&#39;vlan&#39;</span><span class="p">:</span> <span class="kc">None</span><span class="p">,</span>
</span></span><span class="line"><span class="cl"> <span class="s1">&#39;status&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;value&#39;</span><span class="p">:</span> <span class="s1">&#39;active&#39;</span><span class="p">,</span> <span class="s1">&#39;label&#39;</span><span class="p">:</span> <span class="s1">&#39;Active&#39;</span><span class="p">},</span>
</span></span><span class="line"><span class="cl"> <span class="s1">&#39;role&#39;</span><span class="p">:</span> <span class="kc">None</span><span class="p">,</span>
</span></span><span class="line"><span class="cl"> <span class="s1">&#39;is_pool&#39;</span><span class="p">:</span> <span class="kc">False</span><span class="p">,</span>
</span></span><span class="line"><span class="cl"> <span class="s1">&#39;mark_utilized&#39;</span><span class="p">:</span> <span class="kc">False</span><span class="p">,</span>
</span></span><span class="line"><span class="cl"> <span class="s1">&#39;description&#39;</span><span class="p">:</span> <span class="s1">&#39;Office Networks AGG&#39;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl"> <span class="s1">&#39;tags&#39;</span><span class="p">:</span> <span class="p">[],</span>
</span></span><span class="line"><span class="cl"> <span class="s1">&#39;custom_fields&#39;</span><span class="p">:</span> <span class="p">{},</span>
</span></span><span class="line"><span class="cl"> <span class="s1">&#39;created&#39;</span><span class="p">:</span> <span class="s1">&#39;2022-08-04T15:20:45.245603Z&#39;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl"> <span class="s1">&#39;last_updated&#39;</span><span class="p">:</span> <span class="s1">&#39;2022-08-04T15:23:27.494298Z&#39;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl"> <span class="s1">&#39;children&#39;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
</span></span><span class="line"><span class="cl"> <span class="s1">&#39;_depth&#39;</span><span class="p">:</span> <span class="mi">0</span><span class="p">}</span>
</span></span></code></pre></div><div class="gblog-post__anchorwrap">
    <h5 id="delete-method">
        delete() method
        <a data-clipboard-text="https://iserghini.github.io/posts/netbox-automation-using-pynetbox/#delete-method" class="gblog-post__anchor clip flex align-center" aria-label="Anchor delete() method" href="#delete-method">
            <svg class="gblog-icon gblog_link"><use xlink:href="#gblog_link"></use></svg>
        </a>
    </h5>
</div>
<p>Finally, let&rsquo;s delete the prefix:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="line"><span class="cl"><span class="n">In</span> <span class="p">[</span><span class="mi">128</span><span class="p">]:</span> <span class="n">prefix_2</span><span class="o">.</span><span class="n">delete</span><span class="p">()</span>
</span></span><span class="line"><span class="cl"><span class="n">Out</span><span class="p">[</span><span class="mi">128</span><span class="p">]:</span> <span class="kc">True</span>
</span></span></code></pre></div><p>Is it gone?</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="line"><span class="cl"><span class="n">In</span> <span class="p">[</span><span class="mi">129</span><span class="p">]:</span>  <span class="n">nb</span><span class="o">.</span><span class="n">ipam</span><span class="o">.</span><span class="n">prefixes</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">prefix</span><span class="o">=</span><span class="s1">&#39;172.16.0.0/16&#39;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="n">In</span> <span class="p">[</span><span class="mi">130</span><span class="p">]:</span> 
</span></span></code></pre></div><p>It is indeed!</p>
<div class="gblog-post__anchorwrap">
    <h2 id="conclusion">
        Conclusion
        <a data-clipboard-text="https://iserghini.github.io/posts/netbox-automation-using-pynetbox/#conclusion" class="gblog-post__anchor clip flex align-center" aria-label="Anchor Conclusion" href="#conclusion">
            <svg class="gblog-icon gblog_link"><use xlink:href="#gblog_link"></use></svg>
        </a>
    </h2>
</div>
<p>In this post we&rsquo;ve covered what I belive are the most important features of Pynetbox. Hopefully by now you should be able to know enough to start doing some useful things. In an upcoming post, I&rsquo;ll cover an end-to-end real automation use case leveraging what we&rsquo;ve seen here.</p>
<div class="gblog-post__anchorwrap">
    <h2 id="further-reading">
        Further Reading
        <a data-clipboard-text="https://iserghini.github.io/posts/netbox-automation-using-pynetbox/#further-reading" class="gblog-post__anchor clip flex align-center" aria-label="Anchor Further Reading" href="#further-reading">
            <svg class="gblog-icon gblog_link"><use xlink:href="#gblog_link"></use></svg>
        </a>
    </h2>
</div>
<ul>
<li>
<a href="https://pynetbox.readthedocs.io/en/latest/" target="_blank">https://pynetbox.readthedocs.io/en/latest/</a>

</li>
<li>
<a href="https://github.com/netbox-community/pynetbox" target="_blank">https://github.com/netbox-community/pynetbox</a>

</li>
<li>
<a href="https://ttl255.com/pynetbox-netbox-python-api-client-p1-getting-info/" target="_blank">https://ttl255.com/pynetbox-netbox-python-api-client-p1-getting-info/</a>

</li>
</ul>
<div class="footnotes" role="doc-endnotes">
<hr>
<ol>
<li id="fn:1">
<p>We will still need to deal with the API documentation to understand the specific API calls we want to make as the Pynetbox library uses the same structure as the Netbox API.&#160;<a href="#fnref:1" class="footnote-backref" role="doc-backlink">&#x21a9;&#xfe0e;</a></p>
</li>
<li id="fn:2">
<p>&rsquo;nb&rsquo; is just a variable name, in reality you can name it however you want.&#160;<a href="#fnref:2" class="footnote-backref" role="doc-backlink">&#x21a9;&#xfe0e;</a></p>
</li>
</ol>
</div>
    </section>
  </article>

      </main>

      <footer class="gblog-footer">
  <nav class="container flex">
    <div>
      <section class="flex flex-wrap align-center">
        
          <span class="gblog-footer__item gblog-footer__item--row">
            <svg class="gblog-icon gblog_rss_feed"><use xlink:href="#gblog_rss_feed"></use></svg>
            <a href="/feed.xml" class="gblog-footer__link">Atom Feed</a>
          </span>
        
        
        
        
      </section>
      <section class="flex flex-wrap align-center">
        <span class="gblog-footer__item">
          Built with <a href="https://gohugo.io/" class="gblog-footer__link">Hugo</a> and
          <svg class="gblog-icon gblog_heart"><use xlink:href="#gblog_heart"></use></svg>
        </span>
      </section>
      
      
    </div>
    
      <div class="flex flex-25 justify-end">
        <span class="gblog-footer__item text-right">
          <a class="gblog-footer__link fake-link" href="#" aria-label="Back to top">
            <svg class="gblog-icon gblog_keyboard_arrow_up">
              <use xlink:href="#gblog_keyboard_arrow_up"></use>
            </svg>
            <span class="hidden-mobile">Back to top</span>
          </a>
        </span>
      </div>
    
  </nav>
</footer>

    </div>
  </body>
</html>
